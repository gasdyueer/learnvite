<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lua 脚本指南 | learnvite</title>
    <meta name="description" content="A vitepress site to put good articles">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/learnvite/assets/style.DWV7b4Q_.css" as="style">
    <link rel="preload stylesheet" href="/learnvite/vp-icons.css" as="style">
    
    <script type="module" src="/learnvite/assets/app.DdI62zEk.js"></script>
    <link rel="preload" href="/learnvite/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/learnvite/assets/chunks/theme.jZrTu8eq.js">
    <link rel="modulepreload" href="/learnvite/assets/chunks/framework.B2zTblAe.js">
    <link rel="modulepreload" href="/learnvite/assets/lua-script-guide.md.CypeKy9M.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0b0ada53></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0b0ada53>Skip to content</a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle has-sidebar" data-v-6aa21345 data-v-1168a8e4><a class="title" href="/learnvite/" data-v-1168a8e4><!--[--><!--]--><!----><span data-v-1168a8e4>learnvite</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/learnvite/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>首页</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/learnvite/markdown-examples.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>示例</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/learnvite/how-to-improve-self-control.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>转载文章</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/gasdyueer" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cf11d7a2><span class="vpi-more-horizontal icon" data-v-cf11d7a2></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>Appearance</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/gasdyueer" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-8a42e2b4><button data-v-8a42e2b4>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-319d5ca6><div class="curtain" data-v-319d5ca6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-319d5ca6><span class="visually-hidden" id="sidebar-aria-label" data-v-319d5ca6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>示例</h2><!----></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/learnvite/markdown-examples.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Markdown 示例</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/learnvite/api-examples.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>API 示例</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 has-active" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>转载文章</h2><!----></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/learnvite/how-to-improve-self-control.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>【转载文章】 如何提高自控力</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/learnvite/lua-script-guide.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>【转载文章】 Lua 脚本指南</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>On this page</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _learnvite_lua-script-guide" data-v-39a288b8><div><h1 id="lua-脚本指南" tabindex="-1">Lua 脚本指南 <a class="header-anchor" href="#lua-脚本指南" aria-label="Permalink to &quot;Lua 脚本指南&quot;">​</a></h1><h2 id="关于-lua-脚本" tabindex="-1">关于 Lua 脚本 <a class="header-anchor" href="#关于-lua-脚本" aria-label="Permalink to &quot;关于 Lua 脚本&quot;">​</a></h2><p>Lua 语言可用于脚本控制、脚本文件（<code>*.anm2, *.obj2, *.cam2, *.scn2, *.tra2</code>）以及文本的脚本控制字符中。此外，还扩展了一些变量和函数。</p><div class="tip custom-block"><p class="custom-block-title">注意</p><p>旧版脚本文件（<code>*.anm, *.obj, *.cam, *.scn, *.tra</code>）也可以使用，但部分功能不受支持。</p></div><h2 id="注意事项" tabindex="-1">注意事项 <a class="header-anchor" href="#注意事项" aria-label="Permalink to &quot;注意事项&quot;">​</a></h2><ul><li>脚本的字符编码是 UTF-8。旧版脚本文件是 SJIS。</li><li>脚本的放置位置是 <code>ProgramData\aviutl2\Script\</code> 文件夹（以及其下一级子文件夹）。</li><li>从脚本中调用脚本时，可能无法正常工作。</li><li>执行“废弃缓存”操作会重新加载脚本（包括着色器），但设置项的更改不会反映。</li><li>旧版脚本文件格式的像素输出相关函数不受支持。可使用着色器代替。</li></ul><h2 id="设置项" tabindex="-1">设置项 <a class="header-anchor" href="#设置项" aria-label="Permalink to &quot;设置项&quot;">​</a></h2><p>通过在脚本文件开头指定以下内容，可以添加设置项。</p><h3 id="定义轨迹条项目" tabindex="-1">定义轨迹条项目 <a class="header-anchor" href="#定义轨迹条项目" aria-label="Permalink to &quot;定义轨迹条项目&quot;">​</a></h3><p>在脚本文件开头指定 <code>--track@变量名:项目名,最小值,最大值,默认值,移动单位</code> 即可启用轨迹条。移动单位可以是 <code>&#39;1&#39;</code>, <code>&#39;0.1&#39;</code>, <code>&#39;0.01&#39;</code>, <code>&#39;0.001&#39;</code> 或省略。</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>旧版脚本文件格式的 <code>--track0:项目名,最小值,最大值,默认值,移动单位</code> 也可以使用。</p></div><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--track@vx:X速度,-10,10,0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ox</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ox</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">time</span></span></code></pre></div><h3 id="定义复选框项目" tabindex="-1">定义复选框项目 <a class="header-anchor" href="#定义复选框项目" aria-label="Permalink to &quot;定义复选框项目&quot;">​</a></h3><p>在脚本文件开头指定 <code>--check@变量名:项目名,默认值(0或1)</code> 即可启用复选框。</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>旧版脚本文件格式的 <code>--check0:项目名,默认值(0或1)</code> 也可以使用。</p></div><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--check@grav:重力,0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">( grav ) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">then</span></span></code></pre></div><h3 id="定义颜色设置项目" tabindex="-1">定义颜色设置项目 <a class="header-anchor" href="#定义颜色设置项目" aria-label="Permalink to &quot;定义颜色设置项目&quot;">​</a></h3><p>在脚本文件开头指定 <code>--color@变量名:项目名,默认值</code> 即可启用颜色设置项目。将默认值指定为 <code>nil</code> 可选择透明色。</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>旧版脚本文件格式的 <code>--color:默认值</code> 也可以使用。</p></div><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--color@col:图形颜色,0xffffff</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">load</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;figure&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;四角形&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,col,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h3 id="定义文件选择项目" tabindex="-1">定义文件选择项目 <a class="header-anchor" href="#定义文件选择项目" aria-label="Permalink to &quot;定义文件选择项目&quot;">​</a></h3><p>在脚本文件开头指定 <code>--file@变量名:项目名</code> 即可启用文件选择项目。</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>旧版脚本文件格式的 <code>--file:</code> 也可以使用。</p></div><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--file@path:图片文件</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">load</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;image&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,path)</span></span></code></pre></div><h3 id="定义字体设置项目" tabindex="-1">定义字体设置项目 <a class="header-anchor" href="#定义字体设置项目" aria-label="Permalink to &quot;定义字体设置项目&quot;">​</a></h3><p>在脚本文件开头指定 <code>--font@变量名:项目名,默认值</code> 即可启用字体设置项目。</p><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--font@font:字体名,MS UI Gothic</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setfont</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(font,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,deco,col1,col2)</span></span></code></pre></div><h3 id="定义图形设置项目" tabindex="-1">定义图形设置项目 <a class="header-anchor" href="#定义图形设置项目" aria-label="Permalink to &quot;定义图形设置项目&quot;">​</a></h3><p>在脚本文件开头指定 <code>--figure@变量名:项目名,默认值</code> 即可启用图形设置项目。</p><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--figure@fig:先端图形,三角形</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">load</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;figure&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,fig,col,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h3 id="定义列表选择项目" tabindex="-1">定义列表选择项目 <a class="header-anchor" href="#定义列表选择项目" aria-label="Permalink to &quot;定义列表选择项目&quot;">​</a></h3><p>在脚本文件开头指定 <code>--select@变量名:项目名=默认值,选项=值,选项=值,选项=值</code> 即可启用列表选择项目。默认值可以省略。</p><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--select@deco:装饰类型,标准文字=0,带影文字=1,带影文字(淡)=2,描边文字=3,描边文字(细)=4,描边文字(粗)=5,描边文字(角)=6</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setfont</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(font,obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">track2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,deco,col1,col2)</span></span></code></pre></div><h3 id="定义变量项目" tabindex="-1">定义变量项目 <a class="header-anchor" href="#定义变量项目" aria-label="Permalink to &quot;定义变量项目&quot;">​</a></h3><p>在脚本文件开头指定 <code>--value@变量名:项目名,默认值</code> 即可启用变量项目。变量项目是文本输入项目，可以定义数值、字符串、数组。</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>类型会根据默认值的内容自动切换。</p></div><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--value@num:数值,0</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--value@text:字符串,&quot;0&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--value@table:数组,{0,0,0}</span></span></code></pre></div><h3 id="定义对象追加菜单的标签" tabindex="-1">定义对象追加菜单的标签 <a class="header-anchor" href="#定义对象追加菜单的标签" aria-label="Permalink to &quot;定义对象追加菜单的标签&quot;">​</a></h3><p>在脚本文件开头指定 <code>--label:标签名</code> 即可设置对象追加菜单层级的初始标签。</p><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--label:加工</span></span></code></pre></div><h3 id="指定脚本类型" tabindex="-1">指定脚本类型 <a class="header-anchor" href="#指定脚本类型" aria-label="Permalink to &quot;指定脚本类型&quot;">​</a></h3><p>在脚本文件开头指定 <code>--script:类型</code> 即可指定脚本类型（<code>luaJIT</code>, <code>lua</code>）。如果未指定，默认为 <code>luaJIT</code>。旧版脚本文件默认为 <code>lua</code>。</p><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--script:lua</span></span></code></pre></div><h3 id="指定脚本信息" tabindex="-1">指定脚本信息 <a class="header-anchor" href="#指定脚本信息" aria-label="Permalink to &quot;指定脚本信息&quot;">​</a></h3><p>在脚本文件开头指定 <code>--information:标签名</code> 即可设置脚本信息。</p><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--information:测试脚本 ver2.00 by Kenkun</span></span></code></pre></div><h3 id="定义像素着色器" tabindex="-1">定义像素着色器 <a class="header-anchor" href="#定义像素着色器" aria-label="Permalink to &quot;定义像素着色器&quot;">​</a></h3><p>在脚本文件开头的多行注释 <code>--[[pixelshader@注册名:</code> 中，可以用 HLSL 编写像素着色器。</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>注册名即为入口点。</p></div><div class="language-hlsl vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">hlsl</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--[[pixelshader@psmain:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    float4</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> psmain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">float4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pos : </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SV_Position</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) : </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SV_Target</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]]</span></span></code></pre></div><h3 id="定义计算着色器" tabindex="-1">定义计算着色器 <a class="header-anchor" href="#定义计算着色器" aria-label="Permalink to &quot;定义计算着色器&quot;">​</a></h3><p>在脚本文件开头的多行注释 <code>--[[computeshader@注册名:</code> 中，可以用 HLSL 编写计算着色器。</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>注册名即为入口点。</p></div><div class="language-hlsl vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">hlsl</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--[[computeshader@csmain:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">numthreads</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    void</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> csmain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">uint2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id : </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SV_DispatchThreadID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]]</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>旧版脚本文件格式的 <code>--dialog</code> 和 <code>--param</code> 也可以使用。它们会创建独立的设置项。</p></div><h2 id="变量" tabindex="-1">变量 <a class="header-anchor" href="#变量" aria-label="Permalink to &quot;变量&quot;">​</a></h2><p>目标对象的信息会进入以下变量。</p><ul><li><code>obj.ox</code> : 基于基准坐标的相对 X 坐标</li><li><code>obj.oy</code> : 基于基准坐标的相对 Y 坐标</li><li><code>obj.oz</code> : 基于基准坐标的相对 Z 坐标</li><li><code>obj.rx</code> : X 轴旋转角度 (360.0 为一圈)</li><li><code>obj.ry</code> : Y 轴旋转角度 (360.0 为一圈)</li><li><code>obj.rz</code> : Z 轴旋转角度 (360.0 为一圈)</li><li><code>obj.cx</code> : 中心相对 X 坐标</li><li><code>obj.cy</code> : 中心相对 Y 坐标</li><li><code>obj.cz</code> : 中心相对 Z 坐标</li><li><code>obj.zoom</code> : 缩放比例 (1.0 = 等倍)</li><li><code>obj.alpha</code> : 不透明度 (0.0～1.0 / 0.0 = 透明 / 1.0 = 不透明)</li><li><code>obj.aspect</code> : 纵横比 (-1.0～1.0 / 正值 = 横向缩小 / 负值 = 纵向缩小)</li><li><code>obj.x</code> : 显示基准 X 坐标 (只读)</li><li><code>obj.y</code> : 显示基准 Y 坐标 (只读)</li><li><code>obj.z</code> : 显示基准 Z 坐标 (只读)</li><li><code>obj.w</code> : 图像宽度 (只读)</li><li><code>obj.h</code> : 图像高度 (只读)</li><li><code>obj.screen_w</code> : 屏幕宽度 (只读)</li><li><code>obj.screen_h</code> : 屏幕高度 (只读)</li><li><code>obj.framerate</code> : 帧率 (只读)</li><li><code>obj.frame</code> : 基于对象的当前帧号 (只读)</li><li><code>obj.time</code> : 基于对象的当前时间（秒） (只读)</li><li><code>obj.totalframe</code> : 对象的总帧数 (只读)</li><li><code>obj.totaltime</code> : 对象的总时间（秒） (只读)</li><li><code>obj.layer</code> : 对象所在的图层 (只读)</li><li><code>obj.index</code> : 多个对象时的编号 (只读) <em>※用于单个对象</em></li><li><code>obj.num</code> : 多个对象时的数量 (1 = 单个对象 / 0 = 不确定) (只读) <em>※用于单个对象</em></li></ul><h2 id="函数" tabindex="-1">函数 <a class="header-anchor" href="#函数" aria-label="Permalink to &quot;函数&quot;">​</a></h2><p>脚本中添加了以下函数。</p><h3 id="obj-mes-text" tabindex="-1"><code>obj.mes(text)</code> <a class="header-anchor" href="#obj-mes-text" aria-label="Permalink to &quot;`obj.mes(text)`&quot;">​</a></h3><p>在文本对象中添加指定的文本。仅可在文本对象的文本内容中使用。</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>可以省略 <code>obj.</code> 直接使用 <code>mes()</code>。</p></div><ul><li><code>text</code>: 指定要显示的文本。</li><li>示例：<code>obj.mes(&quot;这段文字将被插入并显示&quot;)</code></li></ul><h3 id="obj-effect-name-param1-value1-param2-value2" tabindex="-1"><code>obj.effect([name,param1,value1,param2,value2,...])</code> <a class="header-anchor" href="#obj-effect-name-param1-value1-param2-value2" aria-label="Permalink to &quot;`obj.effect([name,param1,value1,param2,value2,...])`&quot;">​</a></h3><p>执行指定的滤镜效果。仅可在媒体对象中使用。不带参数调用时，会执行脚本之后的滤镜效果。</p><ul><li><code>name</code>: 指定效果的名称。</li><li><code>param1</code>: 指定效果参数的名称。</li><li><code>value1</code>: 指定效果参数的值。<code>param?,value?</code> 的组合可以根据需要指定任意数量。</li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>除了轨迹条和复选框以外的设置的 <code>param</code>, <code>value</code> 将是别名文件等输出时的名称和值。</p><p>旧版脚本文件的参数会参考 <code>effect.conf</code> 的定义进行转换。不足的定义会适当地添加。</p></div><p>示例：<code>obj.effect(&quot;色调补正&quot;,&quot;亮度&quot;,150,&quot;色相&quot;,180)</code></p><h3 id="obj-draw-ox-oy-oz-zoom-alpha-rx-ry-rz" tabindex="-1"><code>obj.draw([ox,oy,oz,zoom,alpha,rx,ry,rz])</code> <a class="header-anchor" href="#obj-draw-ox-oy-oz-zoom-alpha-rx-ry-rz" aria-label="Permalink to &quot;`obj.draw([ox,oy,oz,zoom,alpha,rx,ry,rz])`&quot;">​</a></h3><p>绘制当前对象。通常情况下，即使不进行任何操作，对象也会在最后绘制。但使用 <code>obj.draw()</code> 可以多次绘制对象。</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>使用 <code>obj.draw()</code> 时，脚本之后的滤镜效果不会执行。</p><p>通过不带参数调用 <code>obj.effect()</code> 可以预先执行脚本之后的滤镜效果。</p></div><ul><li><code>ox</code>: 相对 X 坐标</li><li><code>oy</code>: 相对 Y 坐标</li><li><code>oz</code>: 相对 Z 坐标</li><li><code>zoom</code>: 缩放比例 (1.0 = 等倍)</li><li><code>alpha</code>: 不透明度 (0.0 = 透明 / 1.0 = 不透明)</li><li><code>rx</code>: X 轴旋转角度 (360.0 为一圈)</li><li><code>ry</code>: Y 轴旋转角度 (360.0 为一圈)</li><li><code>rz</code>: Z 轴旋转角度 (360.0 为一圈)</li></ul><p>示例：<code>obj.draw(2,10,0)</code></p><h3 id="obj-drawpoly-x0-y0-z0-x1-y1-z1-x2-y2-z2-x3-y3-z3-u0-v0-u1-v1-u2-v2-u3-v3-alpha" tabindex="-1"><code>obj.drawpoly(x0,y0,z0,x1,y1,z1,x2,y2,z2,x3,y3,z3[,u0,v0,u1,v1,u2,v2,u3,v3,alpha])</code> <a class="header-anchor" href="#obj-drawpoly-x0-y0-z0-x1-y1-z1-x2-y2-z2-x3-y3-z3-u0-v0-u1-v1-u2-v2-u3-v3-alpha" aria-label="Permalink to &quot;`obj.drawpoly(x0,y0,z0,x1,y1,z1,x2,y2,z2,x3,y3,z3[,u0,v0,u1,v1,u2,v2,u3,v3,alpha])`&quot;">​</a></h3><p>以任意四边形绘制当前对象的任意部分。</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>除内角均小于等于 180 度的平面外，无法正确绘制。</p><p>从顶点 0 到 3 顺时针方向的面为正面。</p><p>使用 <code>obj.drawpoly()</code> 时，脚本之后的滤镜效果不会执行。</p></div><ul><li><code>x0,y0,z0</code> : 四边形顶点 0 的坐标</li><li><code>x1,y1,z1</code> : 四边形顶点 1 的坐标</li><li><code>x2,y2,z2</code> : 四边形顶点 2 的坐标</li><li><code>x3,y3,z3</code> : 四边形顶点 3 的坐标</li><li><code>u0,v0</code> : 对应顶点 0 的对象图像坐标</li><li><code>u1,v1</code> : 对应顶点 1 的对象图像坐标</li><li><code>u2,v2</code> : 对应顶点 2 的对象图像坐标</li><li><code>u3,v3</code> : 对应顶点 3 的对象图像坐标</li></ul><p>示例：<code>obj.drawpoly(-50,-50,0, 50,-50,0, 50,50,0, -50,50,0, 0,0, obj.w,0, obj.w,obj.h, 0,obj.h)</code></p><h4 id="obj-drawpoly-table-alpha" tabindex="-1"><code>obj.drawpoly({table}[,alpha])</code> <a class="header-anchor" href="#obj-drawpoly-table-alpha" aria-label="Permalink to &quot;`obj.drawpoly({table}[,alpha])`&quot;">​</a></h4><p>可以将多个 <code>obj.drawpoly()</code> 的参数以表格形式指定。比多次调用 <code>obj.drawpoly()</code> 绘制更快。</p><p>支持以下表格形式：</p><ul><li><code>{x0,y0,z0,x1,y1,z1,x2,y2,z2,x3,y3,z3,u0,v0,u1,v1,u2,v2,u3,v3}</code></li><li><code>{x0,y0,z0,x1,y1,z1,x2,y2,z2,x3,y3,z3,u0,v0,u1,v1,u2,v2,u3,v3,vx0,vy0,vz0,vx1,vy1,vz1,vx2,vy2,vz2,vx3,vy3,vz3}</code></li><li><code>{x0,y0,z0,x1,y1,z1,x2,y2,z2,x3,y3,z3,r0,g0,b0,a0,r1,g1,b1,a1,r2,g2,b2,a2,r3,g3,b3,a3}</code></li><li><code>{x0,y0,z0,x1,y1,z1,x2,y2,z2,x3,y3,z3,r0,g0,b0,a0,r1,g1,b1,a1,r2,g2,b2,a2,r3,g3,b3,a3,vx0,vy0,vz0,vx1,vy1,vz1,vx2,vy2,vz2,vx3,vy3,vz3}</code></li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p><code>vx,vy,vz</code> 为法线向量</p><p><code>r,g,b,a</code> 为绘制颜色 (0.0～1.0 的预乘 Alpha) <strong>不使用对象的图像</strong></p></div><p>示例：</p><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">table.insert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vertex,{x0,y0,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,x1,y1,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,x2,y2,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,x3,y3,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,u0,v0,u1,v1,u2,v2,u3,v3})</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">table.insert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vertex,{x0,y0,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,x1,y1,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,x2,y2,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,x3,y3,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,u0,v0,u1,v1,u2,v2,u3,v3})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">drawpoly</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vertex)</span></span></code></pre></div><h3 id="obj-load-type" tabindex="-1"><code>obj.load([type],...)</code> <a class="header-anchor" href="#obj-load-type" aria-label="Permalink to &quot;`obj.load([type],...)`&quot;">​</a></h3><p>加载当前对象的图像。如果省略 <code>type</code>，则自动判断。</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>已加载的图像将被丢弃。</p></div><h4 id="视频文件" tabindex="-1">视频文件 <a class="header-anchor" href="#视频文件" aria-label="Permalink to &quot;视频文件&quot;">​</a></h4><p><code>obj.load(&quot;movie&quot;,file[,time])</code><br>从视频文件加载指定时间的图像。</p><ul><li><code>file</code>: 视频文件名</li><li><code>time</code>: 要显示的图像时间（秒）（省略时为对象当前时间）</li><li>返回值: 视频总时间（秒）</li><li>示例：<code>obj.load(&quot;movie&quot;,&quot;c:\\test.avi&quot;)</code></li></ul><h4 id="图像文件" tabindex="-1">图像文件 <a class="header-anchor" href="#图像文件" aria-label="Permalink to &quot;图像文件&quot;">​</a></h4><p><code>obj.load(&quot;image&quot;,file)</code><br>加载图像文件。</p><ul><li><code>file</code>: 图像文件名</li><li>返回值: 无</li><li>示例：<code>obj.load(&quot;image&quot;,&quot;c:\\test.bmp&quot;)</code></li></ul><h4 id="图形" tabindex="-1">图形 <a class="header-anchor" href="#图形" aria-label="Permalink to &quot;图形&quot;">​</a></h4><p><code>obj.load(&quot;figure&quot;,name[,color,alpha,div_w,div_h])</code><br>加载指定的图形。</p><ul><li><code>name</code>: 图形名</li><li><code>color</code>: 颜色 (RGB)</li><li><code>alpha</code>: 不透明度 (0.0～1.0)</li><li><code>div_w</code>: 横向分割数</li><li><code>div_h</code>: 纵向分割数</li><li>返回值: 无</li><li>示例：<code>obj.load(&quot;figure&quot;,&quot;四角形&quot;,0xff0000,1.0)</code></li></ul><h4 id="文本" tabindex="-1">文本 <a class="header-anchor" href="#文本" aria-label="Permalink to &quot;文本&quot;">​</a></h4><p><code>obj.load(&quot;text&quot;,text[,font,size,type,color1,color2])</code><br>加载指定的文本。</p><ul><li><code>text</code>: 文本</li><li><code>font</code>: 字体名</li><li><code>size</code>: 字体大小</li><li><code>type</code>: 文字装饰 (0～6) <ul><li>0: 标准文字</li><li>1: 带影文字</li><li>2: 带影文字(淡)</li><li>3: 描边文字</li><li>4: 描边文字(细)</li><li>5: 描边文字(粗)</li><li>6: 描边文字(角)</li></ul></li><li><code>color1</code>: 文字颜色 (RGB)</li><li><code>color2</code>: 阴影/边框颜色 (RGB)</li><li>返回值: 无</li><li>示例：<code>obj.load(&quot;text&quot;,&quot;测试&quot;,nil,50)</code></li></ul><h3 id="obj-setfont-font-size-type-color1-color2" tabindex="-1"><code>obj.setfont(font,size,type,color1,color2)</code> <a class="header-anchor" href="#obj-setfont-font-size-type-color1-color2" aria-label="Permalink to &quot;`obj.setfont(font,size,type,color1,color2)`&quot;">​</a></h3><p>设置 <code>obj.mes()</code> 使用的字体。</p><ul><li><code>font</code>: 字体名</li><li><code>size</code>: 字体大小</li><li><code>type</code>: 文字装饰 (0～6)</li><li><code>color1</code>: 文字颜色 (RGB)</li><li><code>color2</code>: 阴影/边框颜色 (RGB)</li><li>返回值: 无</li><li>示例：<code>obj.setfont(nil,50)</code></li></ul><h3 id="obj-rand-max-min" tabindex="-1"><code>obj.rand(max[,min])</code> <a class="header-anchor" href="#obj-rand-max-min" aria-label="Permalink to &quot;`obj.rand(max[,min])`&quot;">​</a></h3><p>获取随机数。</p><ul><li><code>max</code>: 最大值</li><li><code>min</code>: 最小值（省略时为 0）</li><li>返回值: 随机数</li><li>示例：<code>obj.rand(100)</code></li></ul><h3 id="obj-setoption-name-value-cam" tabindex="-1"><code>obj.setoption(name,value[,cam])</code> <a class="header-anchor" href="#obj-setoption-name-value-cam" aria-label="Permalink to &quot;`obj.setoption(name,value[,cam])`&quot;">​</a></h3><p>设置相机控制等选项。</p><ul><li><code>name</code>: 选项名</li><li><code>value</code>: <ul><li><code>&quot;target&quot;</code>: 相机目标图层</li><li><code>&quot;depth&quot;</code>: 景深</li><li><code>&quot;pers&quot;</code>: 透视投影</li><li><code>&quot;alpha&quot;</code>: 启用 Alpha 通道</li><li><code>&quot;add&quot;</code>: 启用加法合成</li><li><code>&quot;sub&quot;</code>: 启用减法合成</li><li><code>&quot;mul&quot;</code>: 启用乘法合成</li><li><code>&quot;screen&quot;</code>: 启用滤色合成</li><li><code>&quot;overlay&quot;</code>: 启用叠加合成</li><li><code>&quot;dodge&quot;</code>: 启用颜色减淡合成</li><li><code>&quot;burn&quot;</code>: 启用颜色加深合成</li><li><code>&quot;hardlight&quot;</code>: 启用强光合成</li><li><code>&quot;softlight&quot;</code>: 启用柔光合成</li><li><code>&quot;diff&quot;</code>: 启用差值合成</li><li><code>&quot;exclusion&quot;</code>: 启用排除合成</li><li><code>&quot;darker&quot;</code>: 启用变暗合成</li><li><code>&quot;lighter&quot;</code>: 启用变亮合成</li><li><code>&quot;uv_flow&quot;</code>: 启用 UV 流动</li><li><code>&quot;uv_scroll&quot;</code>: 启用 UV 滚动</li><li><code>&quot;uv_repeat&quot;</code>: 启用 UV 重复</li><li><code>&quot;uv_resize&quot;</code>: 启用 UV 调整大小</li><li><code>&quot;culling&quot;</code>: 启用背面剔除</li><li><code>&quot;write&quot;</code>: 启用写入 Z 缓冲</li><li><code>&quot;z_bias&quot;</code>: Z 偏移</li><li><code>&quot;wire&quot;</code>: 线框绘制</li><li><code>&quot;bg&quot;</code>: 背景</li><li><code>&quot;camera&quot;</code>: 相机控制</li></ul></li><li><code>cam</code>: 相机参数（表格） <ul><li><code>x</code>: X 坐标</li><li><code>y</code>: Y 坐标</li><li><code>z</code>: Z 坐标</li><li><code>rx</code>: X 轴旋转</li><li><code>ry</code>: Y 轴旋转</li><li><code>rz</code>: Z 轴旋转</li><li><code>cx</code>: 目标 X 坐标</li><li><code>cy</code>: 目标 Y 坐标</li><li><code>cz</code>: 目标 Z 坐标</li><li><code>fov</code>: 视野</li><li><code>aspect</code>: 纵横比</li><li><code>near</code>: 近裁剪面</li><li><code>far</code>: 远裁剪面</li></ul></li><li>返回值: 无</li><li>示例：<code>obj.setoption(&quot;camera&quot;,true,{z=-1000,ry=45})</code></li></ul><h3 id="obj-getoption-name-cam" tabindex="-1"><code>obj.getoption(name[,cam])</code> <a class="header-anchor" href="#obj-getoption-name-cam" aria-label="Permalink to &quot;`obj.getoption(name[,cam])`&quot;">​</a></h3><p>获取相机控制等选项。</p><ul><li><code>name</code>: 选项名</li><li><code>value</code>: <ul><li><code>&quot;target&quot;</code>: 相机目标图层</li><li><code>&quot;depth&quot;</code>: 景深</li><li><code>&quot;pers&quot;</code>: 透视投影</li><li><code>&quot;alpha&quot;</code>: 启用 Alpha 通道</li><li>... (同 <code>setoption</code>)</li></ul></li><li><code>cam</code>: 相机参数（表格）</li><li>返回值: 选项值</li><li>示例：<code>z = obj.getoption(&quot;camera&quot;).z</code></li></ul><h3 id="obj-getvalue-name" tabindex="-1"><code>obj.getvalue(name)</code> <a class="header-anchor" href="#obj-getvalue-name" aria-label="Permalink to &quot;`obj.getvalue(name)`&quot;">​</a></h3><p>获取设置项的值。</p><ul><li><code>name</code>: 项目名</li><li>返回值: 值</li><li>示例：<code>v = obj.getvalue(&quot;X速度&quot;)</code></li></ul><h3 id="obj-setanchor-id-x-y-z" tabindex="-1"><code>obj.setanchor(id,x,y,z)</code> <a class="header-anchor" href="#obj-setanchor-id-x-y-z" aria-label="Permalink to &quot;`obj.setanchor(id,x,y,z)`&quot;">​</a></h3><p>设置锚点坐标。</p><ul><li><code>id</code>: 锚点编号 (0～)</li><li><code>x,y,z</code>: 坐标</li><li>返回值: 无</li><li>示例：<code>obj.setanchor(0,10,20,30)</code></li></ul><h3 id="obj-getpixel-x-y-z" tabindex="-1"><code>obj.getpixel([x,y,z])</code> <a class="header-anchor" href="#obj-getpixel-x-y-z" aria-label="Permalink to &quot;`obj.getpixel([x,y,z])`&quot;">​</a></h3><p>获取指定坐标的颜色。</p><ul><li><code>x,y,z</code>: 坐标</li><li>返回值: 颜色 (RGB)</li><li>示例：<code>col = obj.getpixel()</code></li></ul><h3 id="obj-pixeloption-option-value" tabindex="-1"><code>obj.pixeloption(option,value)</code> <a class="header-anchor" href="#obj-pixeloption-option-value" aria-label="Permalink to &quot;`obj.pixeloption(option,value)`&quot;">​</a></h3><p>设置像素处理的选项。</p><ul><li><code>option</code>: 选项名</li><li><code>value</code>: 值</li><li>返回值: 无</li><li>示例：<code>obj.pixeloption(&quot;type&quot;,&quot;rgb&quot;)</code></li></ul><h3 id="obj-getaudio-frame" tabindex="-1"><code>obj.getaudio(frame)</code> <a class="header-anchor" href="#obj-getaudio-frame" aria-label="Permalink to &quot;`obj.getaudio(frame)`&quot;">​</a></h3><p>获取指定帧的音频波形。</p><ul><li><code>frame</code>: 帧号</li><li>返回值: 音频波形（表格）</li><li>示例：<code>wave = obj.getaudio()</code></li></ul><h3 id="obj-copybuffer-dst-src" tabindex="-1"><code>obj.copybuffer(dst,src)</code> <a class="header-anchor" href="#obj-copybuffer-dst-src" aria-label="Permalink to &quot;`obj.copybuffer(dst,src)`&quot;">​</a></h3><p>复制缓冲区。</p><ul><li><code>dst</code>: 复制目标缓冲区 <ul><li><code>&quot;obj&quot;</code>: 对象</li><li><code>&quot;temp&quot;</code>: 临时</li><li><code>&quot;bak&quot;</code>: 备份</li></ul></li><li><code>src</code>: 复制源缓冲区 <ul><li><code>&quot;obj&quot;</code>: 对象</li><li><code>&quot;temp&quot;</code>: 临时</li><li><code>&quot;bak&quot;</code>: 备份</li></ul></li><li>返回值: 无</li><li>示例：<code>obj.copybuffer(&quot;temp&quot;,&quot;obj&quot;)</code></li></ul><h3 id="obj-clearbuffer-target" tabindex="-1"><code>obj.clearbuffer(target)</code> <a class="header-anchor" href="#obj-clearbuffer-target" aria-label="Permalink to &quot;`obj.clearbuffer(target)`&quot;">​</a></h3><p>清除缓冲区。</p><ul><li><code>target</code>: 要清除的缓冲区名称 <ul><li><code>&quot;obj&quot;</code>: 对象</li><li><code>&quot;temp&quot;</code>: 临时</li><li><code>&quot;bak&quot;</code>: 备份</li></ul></li><li>返回值: 无</li><li>示例：<code>obj.clearbuffer(&quot;temp&quot;)</code></li></ul><h3 id="pixelshader-entry-target-resource-blend" tabindex="-1"><code>pixelshader(entry,target,resource,blend)</code> <a class="header-anchor" href="#pixelshader-entry-target-resource-blend" aria-label="Permalink to &quot;`pixelshader(entry,target,resource,blend)`&quot;">​</a></h3><p>执行像素着色器。</p><ul><li><code>entry</code>: 入口点名称</li><li><code>target</code>: 输出目标缓冲区名称</li><li><code>resource</code>: 引用的缓冲区名称数组</li><li><code>blend</code>: 输出到目标的混合方法</li><li>返回值: 无</li><li>示例：<code>pixelshader(&quot;psmain&quot;,&quot;obj&quot;,{&quot;temp&quot;,&quot;bak&quot;})</code></li></ul><h3 id="computeshader-entry-target-resource" tabindex="-1"><code>computeshader(entry,target,resource)</code> <a class="header-anchor" href="#computeshader-entry-target-resource" aria-label="Permalink to &quot;`computeshader(entry,target,resource)`&quot;">​</a></h3><p>执行计算着色器。</p><ul><li><code>entry</code>: 入口点名称</li><li><code>target</code>: 读写目标缓冲区名称数组</li><li><code>resource</code>: 引用的缓冲区名称数组</li><li>返回值: 无</li><li>示例：<code>computeshader(&quot;csmain&quot;,{&quot;temp&quot;,&quot;bak&quot;})</code></li></ul><h3 id="obj-getpoint-target-section-option" tabindex="-1"><code>obj.getpoint(target,section,option)</code> <a class="header-anchor" href="#obj-getpoint-target-section-option" aria-label="Permalink to &quot;`obj.getpoint(target,section,option)`&quot;">​</a></h3><p>获取轨迹数据。</p><ul><li><code>target</code>: <ul><li>整数=各区间轨迹条值</li><li><code>&quot;x&quot;</code>: X</li><li><code>&quot;y&quot;</code>: Y</li><li><code>&quot;z&quot;</code>: Z</li><li>...</li></ul></li><li><code>section</code>: 时间基准的区间编号</li><li><code>option</code>: 获取值的类型</li><li>返回值: 值</li><li>示例：<code>x = obj.getpoint(&quot;x&quot;)</code></li></ul><h3 id="obj-getinfo-name" tabindex="-1"><code>obj.getinfo(name)</code> <a class="header-anchor" href="#obj-getinfo-name" aria-label="Permalink to &quot;`obj.getinfo(name)`&quot;">​</a></h3><p>获取对象信息。</p><ul><li><code>name</code>: <ul><li><code>&quot;video&quot;</code>: 视频文件信息</li><li><code>&quot;audio&quot;</code>: 音频文件信息</li><li><code>&quot;text&quot;</code>: 文本信息</li><li><code>&quot;figure&quot;</code>: 图形信息</li><li><code>&quot;filter&quot;</code>: 滤镜信息</li><li><code>&quot;script&quot;</code>: 脚本信息</li></ul></li><li>返回值: 信息（表格）</li><li>示例：<code>info = obj.getinfo(&quot;video&quot;)</code></li></ul><h3 id="obj-interpolation-p1-p2-ratio-type" tabindex="-1"><code>obj.interpolation(p1,p2,ratio,type)</code> <a class="header-anchor" href="#obj-interpolation-p1-p2-ratio-type" aria-label="Permalink to &quot;`obj.interpolation(p1,p2,ratio,type)`&quot;">​</a></h3><p>在两点之间进行插值。</p><ul><li><code>p1, p2</code>: 点坐标</li><li><code>ratio</code>: 插值比例</li><li><code>type</code>: 插值类型</li><li>返回值: 插值点坐标</li><li>示例：<code>p = obj.interpolation({0,0},{100,100},0.5)</code></li></ul><h3 id="rgb-r-g-b" tabindex="-1"><code>RGB(r,g,b)</code> <a class="header-anchor" href="#rgb-r-g-b" aria-label="Permalink to &quot;`RGB(r,g,b)`&quot;">​</a></h3><p>将 RGB 值转换为颜色值。</p><h3 id="hsv-h-s-v" tabindex="-1"><code>HSV(h,s,v)</code> <a class="header-anchor" href="#hsv-h-s-v" aria-label="Permalink to &quot;`HSV(h,s,v)`&quot;">​</a></h3><p>将 HSV 值转换为颜色值。</p><h3 id="or-and-xor-a-b" tabindex="-1"><code>OR/AND/XOR(a,b)</code> <a class="header-anchor" href="#or-and-xor-a-b" aria-label="Permalink to &quot;`OR/AND/XOR(a,b)`&quot;">​</a></h3><p>位运算。</p><h3 id="shift-a-shift" tabindex="-1"><code>SHIFT(a,shift)</code> <a class="header-anchor" href="#shift-a-shift" aria-label="Permalink to &quot;`SHIFT(a,shift)`&quot;">​</a></h3><p>位移运算。</p><h3 id="rotation-x-y-z-r" tabindex="-1"><code>rotation(x,y,z,r)</code> <a class="header-anchor" href="#rotation-x-y-z-r" aria-label="Permalink to &quot;`rotation(x,y,z,r)`&quot;">​</a></h3><p>旋转坐标。</p><h3 id="debug-print-text" tabindex="-1"><code>debug_print(text)</code> <a class="header-anchor" href="#debug-print-text" aria-label="Permalink to &quot;`debug_print(text)`&quot;">​</a></h3><p>在调试窗口中输出文本。</p><h2 id="使用示例" tabindex="-1">使用示例 <a class="header-anchor" href="#使用示例" aria-label="Permalink to &quot;使用示例&quot;">​</a></h2><h3 id="文本内使用脚本" tabindex="-1">文本内使用脚本 <a class="header-anchor" href="#文本内使用脚本" aria-label="Permalink to &quot;文本内使用脚本&quot;">​</a></h3><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">do</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  mes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&lt;p&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">..</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">..</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&gt;&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">..</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">..</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&lt;/p&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span></code></pre></div><h3 id="坐标角度变化" tabindex="-1">坐标角度变化 <a class="header-anchor" href="#坐标角度变化" aria-label="Permalink to &quot;坐标角度变化&quot;">​</a></h3><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@sample1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ox</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> math.sin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">time</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">oy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> math.cos</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">time</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rz</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">time</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span></span></code></pre></div><h3 id="滤镜效果" tabindex="-1">滤镜效果 <a class="header-anchor" href="#滤镜效果" aria-label="Permalink to &quot;滤镜效果&quot;">​</a></h3><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--track0:发光强度,0,100,50</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--track1:发光扩散,0,100,25</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--track2:发光阈值,0,100,50</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">effect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;发光&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;强度&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">track0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;扩散&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">track1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;阈值&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">track2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h3 id="多重绘制" tabindex="-1">多重绘制 <a class="header-anchor" href="#多重绘制" aria-label="Permalink to &quot;多重绘制&quot;">​</a></h3><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--value@pos:坐标,{}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i,p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ipairs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pos) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">do</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  obj.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">draw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(p[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],p[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],p[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span></code></pre></div><h3 id="多脚本注册" tabindex="-1">多脚本注册 <a class="header-anchor" href="#多脚本注册" aria-label="Permalink to &quot;多脚本注册&quot;">​</a></h3><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--track0:X,-1000,1000,0</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--track1:Y,-1000,1000,0</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--track2:Z,-1000,1000,0</span></span></code></pre></div><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--value@pos1:坐标1,{}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--value@pos2:坐标2,{}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ox</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pos1[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pos2[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">pos1[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">time</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">totaltime</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">oy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pos1[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pos2[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">pos1[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">time</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">totaltime</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">oz</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pos1[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pos2[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">pos1[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">time</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">totaltime</span></span></code></pre></div><h3 id="场景切换脚本" tabindex="-1">场景切换脚本 <a class="header-anchor" href="#场景切换脚本" aria-label="Permalink to &quot;场景切换脚本&quot;">​</a></h3><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">index,ratio </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> math.modf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getpoint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;index&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setoption</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sceneno&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,index)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">alpha</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ratio</span></span></code></pre></div><h3 id="锚点显示与获取" tabindex="-1">锚点显示与获取 <a class="header-anchor" href="#锚点显示与获取" aria-label="Permalink to &quot;锚点显示与获取&quot;">​</a></h3><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--track@bright:亮度,-100,100,0,0.01</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">effect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;亮度补正&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;亮度&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,bright)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">x,y,z </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getanchor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">draw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x,y,z)</span></span></code></pre></div><h3 id="像素着色器利用" tabindex="-1">像素着色器利用 <a class="header-anchor" href="#像素着色器利用" aria-label="Permalink to &quot;像素着色器利用&quot;">​</a></h3><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--track@bright:亮度,-100,100,0,0.01</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--[[pixelshader@psbright:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">float4 psbright(float4 pos:SV_Position,float2 tc:TEXCOORD0):SV_Target</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  float4 c = tex2D(texture0,tc);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  c.rgb += bright;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  return c;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">]]</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pixelshader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;psbright&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h2 id="更新历史" tabindex="-1">更新历史 <a class="header-anchor" href="#更新历史" aria-label="Permalink to &quot;更新历史&quot;">​</a></h2><ul><li><strong>[2025/7/12] ver 2.00 beta2</strong><ul><li>添加了 <code>computeshader</code></li><li>添加了 <code>obj.getpoint</code></li><li>添加了 <code>obj.getinfo</code></li><li>添加了 <code>obj.interpolation</code></li><li>修复了其他一些错误</li></ul></li></ul><h2 id="lua-luajit-二进制文件" tabindex="-1">Lua/LuaJIT 二进制文件 <a class="header-anchor" href="#lua-luajit-二进制文件" aria-label="Permalink to &quot;Lua/LuaJIT 二进制文件&quot;">​</a></h2><ul><li><code>lua51.dll</code></li><li><code>luajit.dll</code></li><li><code>lua51.exe</code></li><li><code>luajit.exe</code></li></ul><h2 id="lua-许可证" tabindex="-1">Lua 许可证 <a class="header-anchor" href="#lua-许可证" aria-label="Permalink to &quot;Lua 许可证&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Copyright (C) 1994-2008 Lua.org, PUC-Rio.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Permission is hereby granted, free of charge, to any person obtaining a copy</span></span>
<span class="line"><span>of this software and associated documentation files (the &quot;Software&quot;), to deal</span></span>
<span class="line"><span>in the Software without restriction, including without limitation the rights</span></span>
<span class="line"><span>to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span></span>
<span class="line"><span>copies of the Software, and to permit persons to whom the Software is</span></span>
<span class="line"><span>furnished to do so, subject to the following conditions:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>The above copyright notice and this permission notice shall be included in</span></span>
<span class="line"><span>all copies or substantial portions of the Software.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></span>
<span class="line"><span>IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></span>
<span class="line"><span>FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE</span></span>
<span class="line"><span>AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span></span>
<span class="line"><span>LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span></span>
<span class="line"><span>OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN</span></span>
<span class="line"><span>THE SOFTWARE.</span></span></code></pre></div><h2 id="luajit-许可证" tabindex="-1">LuaJIT 许可证 <a class="header-anchor" href="#luajit-许可证" aria-label="Permalink to &quot;LuaJIT 许可证&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>LuaJIT -- a Just-In-Time Compiler for Lua. https://luajit.org/</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Copyright (C) 2005-2022 Mike Pall. All rights reserved.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Permission is hereby granted, free of charge, to any person obtaining</span></span>
<span class="line"><span>a copy of this software and associated documentation files (the</span></span>
<span class="line"><span>&quot;Software&quot;), to deal in the Software without restriction, including</span></span>
<span class="line"><span>without limitation the rights to use, copy, modify, merge, publish,</span></span>
<span class="line"><span>distribute, sublicense, and/or sell copies of the Software, and to</span></span>
<span class="line"><span>permit persons to whom the Software is furnished to do so, subject to</span></span>
<span class="line"><span>the following conditions:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>The above copyright notice and this permission notice shall be</span></span>
<span class="line"><span>included in all copies or substantial portions of the Software.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,</span></span>
<span class="line"><span>EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF</span></span>
<span class="line"><span>MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.</span></span>
<span class="line"><span>IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY</span></span>
<span class="line"><span>CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,</span></span>
<span class="line"><span>TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE</span></span>
<span class="line"><span>SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</span></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><a class="VPLink link pager-link prev" href="/learnvite/how-to-improve-self-control.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Previous page</span><span class="title" data-v-e257564d>【转载文章】 如何提高自控力</span><!--]--></a></div><div class="pager" data-v-e257564d><!----></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"api-examples.md\":\"COF4yTn4\",\"how-to-improve-self-control.md\":\"D3ubzbJJ\",\"index.md\":\"BVuDIOWQ\",\"lua-script-guide.md\":\"CypeKy9M\",\"markdown-examples.md\":\"D7eHXNtg\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"learnvite\",\"description\":\"A vitepress site to put good articles\",\"base\":\"/learnvite/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"首页\",\"link\":\"/\"},{\"text\":\"示例\",\"link\":\"/markdown-examples\"},{\"text\":\"转载文章\",\"link\":\"/how-to-improve-self-control\"}],\"sidebar\":[{\"text\":\"示例\",\"items\":[{\"text\":\"Markdown 示例\",\"link\":\"/markdown-examples\"},{\"text\":\"API 示例\",\"link\":\"/api-examples\"}]},{\"text\":\"转载文章\",\"items\":[{\"text\":\"【转载文章】 如何提高自控力\",\"link\":\"/how-to-improve-self-control\"},{\"text\":\"【转载文章】 Lua 脚本指南\",\"link\":\"/lua-script-guide\"}]}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/gasdyueer\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>