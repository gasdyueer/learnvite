---
title: Lua è„šæœ¬æŒ‡å— v3.0 - å®Œæ•´å‚è€ƒæ‰‹å†Œ
description: AviUtl æ‰©å±•ç¼–è¾‘å™¨ Lua è„šæœ¬çš„å®Œæ•´å‚è€ƒæŒ‡å—ï¼ŒåŒ…å«æ‰€æœ‰å‡½æ•°ã€å˜é‡å’Œä½¿ç”¨ç¤ºä¾‹
outline: deep
---

# Lua è„šæœ¬æŒ‡å— v3.0

::: info ç‰ˆæœ¬ä¿¡æ¯
- **æ–‡æ¡£ç‰ˆæœ¬**: 3.0
- **æœ€åæ›´æ–°**: 2025å¹´9æœˆ21æ—¥
- **é€‚ç”¨ç‰ˆæœ¬**: AviUtl æ‰©å±•ç¼–è¾‘å™¨ 2.00 åŠä»¥ä¸Š
- **è¯­è¨€æ”¯æŒ**: Lua / LuaJIT
- **æŠ€æœ¯æ”¯æŒ**: åŸºäºå®˜æ–¹æ–‡æ¡£æ•´ç†ï¼ŒåŒ…å«æœ€æ–°åŠŸèƒ½
:::

## ğŸ“‹ ç›®å½•

- [å…³äº Lua è„šæœ¬](#å…³äº-lua-è„šæœ¬)
- [é‡è¦æ³¨æ„äº‹é¡¹](#é‡è¦æ³¨æ„äº‹é¡¹)
- [è„šæœ¬æ–‡ä»¶ä½ç½®](#è„šæœ¬æ–‡ä»¶ä½ç½®)
- [è®¾ç½®é¡¹ç›®å®šä¹‰](#è®¾ç½®é¡¹ç›®å®šä¹‰)
  - [è½¨é“æ¡é¡¹ç›®](#è½¨é“æ¡é¡¹ç›®)
  - [å¤é€‰æ¡†é¡¹ç›®](#å¤é€‰æ¡†é¡¹ç›®)
  - [é¢œè‰²è®¾ç½®é¡¹ç›®](#é¢œè‰²è®¾ç½®é¡¹ç›®)
  - [æ–‡ä»¶é€‰æ‹©é¡¹ç›®](#æ–‡ä»¶é€‰æ‹©é¡¹ç›®)
  - [å­—ä½“è®¾ç½®é¡¹ç›®](#å­—ä½“è®¾ç½®é¡¹ç›®)
  - [å›¾å½¢è®¾ç½®é¡¹ç›®](#å›¾å½¢è®¾ç½®é¡¹ç›®)
  - [åˆ—è¡¨é€‰æ‹©é¡¹ç›®](#åˆ—è¡¨é€‰æ‹©é¡¹ç›®)
  - [å˜é‡é¡¹ç›®](#å˜é‡é¡¹ç›®)
  - [å…¶ä»–è®¾ç½®](#å…¶ä»–è®¾ç½®)
- [å†…ç½®å˜é‡](#å†…ç½®å˜é‡)
- [æ‰©å±•å‡½æ•°](#æ‰©å±•å‡½æ•°)
  - [æ–‡æœ¬å¤„ç†](#æ–‡æœ¬å¤„ç†)
  - [ç‰¹æ•ˆå¤„ç†](#ç‰¹æ•ˆå¤„ç†)
  - [ç»˜åˆ¶å‡½æ•°](#ç»˜åˆ¶å‡½æ•°)
  - [å›¾åƒåŠ è½½](#å›¾åƒåŠ è½½)
  - [å­—ä½“è®¾ç½®](#å­—ä½“è®¾ç½®)
  - [éšæœºæ•°ç”Ÿæˆ](#éšæœºæ•°ç”Ÿæˆ)
  - [é€‰é¡¹è®¾ç½®](#é€‰é¡¹è®¾ç½®)
  - [ä¿¡æ¯è·å–](#ä¿¡æ¯è·å–)
  - [åƒç´ æ“ä½œ](#åƒç´ æ“ä½œ)
  - [éŸ³é¢‘å¤„ç†](#éŸ³é¢‘å¤„ç†)
  - [ç¼“å†²åŒºæ“ä½œ](#ç¼“å†²åŒºæ“ä½œ)
  - [ç€è‰²å™¨æ“ä½œ](#ç€è‰²å™¨æ“ä½œ)
  - [è½¨é“æ¡æ“ä½œ](#è½¨é“æ¡æ“ä½œ)
  - [é”šç‚¹æ“ä½œ](#é”šç‚¹æ“ä½œ)
  - [æ•°å­¦å·¥å…·](#æ•°å­¦å·¥å…·)
  - [è°ƒè¯•å·¥å…·](#è°ƒè¯•å·¥å…·)
- [ä½¿ç”¨ç¤ºä¾‹](#ä½¿ç”¨ç¤ºä¾‹)
- [é«˜çº§æŠ€å·§](#é«˜çº§æŠ€å·§)
- [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)
- [æ›´æ–°å†å²](#æ›´æ–°å†å²)

## å…³äº Lua è„šæœ¬

åœ¨ AviUtl æ‰©å±•ç¼–è¾‘å™¨ä¸­ï¼Œè„šæœ¬æ§åˆ¶ã€è„šæœ¬æ–‡ä»¶ï¼ˆ`*.anm2`, `*.obj2`, `*.cam2`, `*.scn2`, `*.tra2`ï¼‰ä»¥åŠæ–‡æœ¬çš„è„šæœ¬æ§åˆ¶å­—ç¬¦ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ **Lua è¯­è¨€**ã€‚

### ä¸»è¦ç‰¹æ€§

- ğŸ¯ **æ‰©å±•åŠŸèƒ½**: æä¾›äº†ä¸°å¯Œçš„å˜é‡å’Œå‡½æ•°æ‰©å±•
- ğŸ”„ **å…¼å®¹æ€§**: æ”¯æŒæ—§è„šæœ¬æ–‡ä»¶æ ¼å¼ï¼ˆ`*.anm`, `*.obj`, `*.cam`, `*.scn`, `*.tra`ï¼‰
- âš ï¸ **éƒ¨åˆ†é™åˆ¶**: æ—§è„šæœ¬æ–‡ä»¶ä¸­çš„æŸäº›åŠŸèƒ½å¯èƒ½ä¸è¢«æ”¯æŒ
- ğŸš€ **é«˜æ€§èƒ½**: æ”¯æŒ LuaJITï¼Œæ€§èƒ½å¤§å¹…æå‡
- ğŸ†• **æœ€æ–°åŠŸèƒ½**: æ”¯æŒåƒç´ æ“ä½œã€ç€è‰²å™¨ã€éŸ³é¢‘å¤„ç†ç­‰é«˜çº§åŠŸèƒ½

### è„šæœ¬ç±»å‹

- **luaJIT** (é»˜è®¤): é«˜æ€§èƒ½ JIT ç¼–è¯‘ç‰ˆæœ¬
- **lua**: æ ‡å‡† Lua è§£é‡Šå™¨ç‰ˆæœ¬

```lua
-- æŒ‡å®šè„šæœ¬ç±»å‹ä¸ºæ ‡å‡† Lua
--script:lua
```

## é‡è¦æ³¨æ„äº‹é¡¹

::: warning é‡è¦æé†’
- è„šæœ¬å­—ç¬¦ç¼–ç å¿…é¡»ä¸º **UTF-8**ï¼ˆæ—§è„šæœ¬æ–‡ä»¶ä¸º SJISï¼‰
- è„šæœ¬å­˜æ”¾ä½ç½®: `ProgramData\aviutl2\Script\` æ–‡ä»¶å¤¹
- è„šæœ¬è°ƒç”¨è„šæœ¬å¯èƒ½æ— æ³•æ­£å¸¸å·¥ä½œ
- æ‰§è¡Œ"ä¸¢å¼ƒç¼“å­˜"æ“ä½œä¼šé‡æ–°åŠ è½½è„šæœ¬ï¼ˆåŒ…æ‹¬ç€è‰²å™¨ï¼‰ï¼Œä½†è®¾ç½®é¡¹æ›´æ”¹ä¸ä¼šåæ˜ 
- æ—§è„šæœ¬æ–‡ä»¶æ ¼å¼çš„ `pixel` è¾“å‡ºç³»åˆ—å‡½æ•°ä¸æ”¯æŒï¼ˆå»ºè®®æ”¹ç”¨ç€è‰²å™¨ï¼‰
- **æ–°å¢**: åƒç´ æ“ä½œå‡½æ•°ç›¸å¯¹è€—è´¹æ€§èƒ½ï¼Œå»ºè®®è°¨æ…ä½¿ç”¨
- è„šæœ¬æ§åˆ¶ä»…æ”¯æŒ `table`ã€`string`ã€`math` åº“ï¼›`os`ã€`debug`ã€`ffi.C` ç­‰åº“å·²è¢«ç§»é™¤
:::

## è„šæœ¬æ–‡ä»¶ä½ç½®

è„šæœ¬æ–‡ä»¶å¿…é¡»æ”¾ç½®åœ¨ä»¥ä¸‹ç›®å½•ä¸­ï¼š

```
ğŸ“ ProgramData
â””â”€â”€ ğŸ“ aviutl2
    â””â”€â”€ ğŸ“ Script
        â”œâ”€â”€ ğŸ“„ è„šæœ¬æ–‡ä»¶1.anm2
        â”œâ”€â”€ ğŸ“„ è„šæœ¬æ–‡ä»¶2.obj2
        â””â”€â”€ ğŸ“ å­æ–‡ä»¶å¤¹
            â””â”€â”€ ğŸ“„ å…¶ä»–è„šæœ¬.lua
```

::: tip æ–‡ä»¶ä½ç½®é‡è¦æé†’
- è„šæœ¬æ–‡ä»¶å¿…é¡»æ”¾åœ¨ `ProgramData\aviutl2\Script\` ç›®å½•ä¸‹
- æ”¯æŒå­æ–‡ä»¶å¤¹åˆ†ç±»ç®¡ç†ï¼Œä¾¿äºç»„ç»‡è„šæœ¬æ–‡ä»¶
- è„šæœ¬æ–‡ä»¶ç¼–ç å¿…é¡»ä¸º UTF-8
:::

::: info ç›®å½•è¯´æ˜
- **Script**: Lua è„šæœ¬æ–‡ä»¶ä¸»ç›®å½•
- **å­æ–‡ä»¶å¤¹**: æ”¯æŒä»»æ„å±‚çº§çš„å­ç›®å½•ç»“æ„
- **æ–‡ä»¶ç±»å‹**: æ”¯æŒ `.lua`ã€`.anm2`ã€`.obj2` ç­‰æ ¼å¼
:::

## è®¾ç½®é¡¹ç›®å®šä¹‰

åœ¨è„šæœ¬æ–‡ä»¶å¼€å¤´ä½¿ç”¨ç‰¹æ®Šæ³¨é‡Šå¯ä»¥æ·»åŠ å„ç§è®¾ç½®é¡¹ç›®ï¼Œè¿™äº›é¡¹ç›®å°†æ˜¾ç¤ºåœ¨ç¼–è¾‘å™¨çš„è®¾ç½®é¢æ¿ä¸­ã€‚

### è½¨é“æ¡é¡¹ç›®

åˆ›å»ºå¯æ‹–åŠ¨çš„æ•°å€¼è°ƒèŠ‚æ»‘å—ã€‚

```lua
--track@å˜é‡å:é¡¹ç›®å,æœ€å°å€¼,æœ€å¤§å€¼,é»˜è®¤å€¼,ç§»åŠ¨å•ä½
```

**å‚æ•°è¯´æ˜ï¼š**
- `å˜é‡å`: è„šæœ¬ä¸­ä½¿ç”¨çš„å˜é‡å
- `é¡¹ç›®å`: åœ¨ç•Œé¢ä¸Šæ˜¾ç¤ºçš„é¡¹ç›®åç§°
- `æœ€å°å€¼`: æ»‘å—çš„æœ€å°å€¼
- `æœ€å¤§å€¼`: æ»‘å—çš„æœ€å¤§å€¼
- `é»˜è®¤å€¼`: åˆå§‹å€¼
- `ç§»åŠ¨å•ä½`: å¯é€‰ï¼Œæ•°å€¼å˜åŒ–æ­¥é•¿ï¼ˆ1, 0.1, 0.01, 0.001 æˆ–çœç•¥ï¼‰

**ç¤ºä¾‹ï¼š**
```lua
--track@vx:Xè½´é€Ÿåº¦,-10,10,0
--track@scale:ç¼©æ”¾æ¯”ä¾‹,0.1,5.0,1.0,0.1

obj.ox = obj.ox + vx * obj.time
obj.zoom = scale
```

::: tip å…¼å®¹æ€§
æ—§è„šæœ¬æ–‡ä»¶æ ¼å¼: `--track0:é¡¹ç›®å,æœ€å°å€¼,æœ€å¤§å€¼,é»˜è®¤å€¼,ç§»åŠ¨å•ä½`
:::

::: info è½¨é“æ¡ä½¿ç”¨æŠ€å·§
- **å˜é‡åè§„èŒƒ**: ä½¿ç”¨ç®€æ´çš„è‹±æ–‡æˆ–æ‹¼éŸ³å‘½å
- **æ•°å€¼èŒƒå›´**: æ ¹æ®å®é™…éœ€æ±‚è®¾ç½®åˆç†çš„èŒƒå›´
- **æ­¥é•¿è®¾ç½®**: å°æ•°ç‚¹æ•°å€¼é€‚åˆç²¾ç»†è°ƒèŠ‚
- **å®æ—¶é¢„è§ˆ**: æ‹–åŠ¨æ—¶å¯å®æ—¶çœ‹åˆ°æ•ˆæœå˜åŒ–
:::

### å¤é€‰æ¡†é¡¹ç›®

åˆ›å»ºå¸ƒå°”å€¼å¼€å…³ã€‚

```lua
--check@å˜é‡å:é¡¹ç›®å,é»˜è®¤å€¼(0æˆ–1)
```

**ç¤ºä¾‹ï¼š**
```lua
--check@enable_gravity:å¯ç”¨é‡åŠ›,0
--check@reverse:åè½¬æ•ˆæœ,1

if enable_gravity then
    -- é‡åŠ›æ•ˆæœä»£ç 
    obj.oy = obj.oy + 9.8 * obj.time * obj.time / 2
end
```

::: tip å…¼å®¹æ€§
æ—§è„šæœ¬æ–‡ä»¶æ ¼å¼: `--check0:é¡¹ç›®å,é»˜è®¤å€¼(0æˆ–1)`
:::

### é¢œè‰²è®¾ç½®é¡¹ç›®

åˆ›å»ºé¢œè‰²é€‰æ‹©å™¨ã€‚

```lua
--color@å˜é‡å:é¡¹ç›®å,é»˜è®¤å€¼
```

**å‚æ•°è¯´æ˜ï¼š**
- `é»˜è®¤å€¼`: åå…­è¿›åˆ¶é¢œè‰²å€¼ï¼ˆ0x000000ï½0xffffffï¼‰
- ç‰¹æ®Šå€¼: `nil` å…è®¸é€‰æ‹©é€æ˜è‰²

**ç¤ºä¾‹ï¼š**
```lua
--color@main_color:ä¸»é¢œè‰²,0xff0000
--color@bg_color:èƒŒæ™¯é¢œè‰²,nil

obj.load("figure", "åœ†", main_color, 100)
```

::: tip å…¼å®¹æ€§
æ—§è„šæœ¬æ–‡ä»¶æ ¼å¼: `--color:é»˜è®¤å€¼`
:::

### æ–‡ä»¶é€‰æ‹©é¡¹ç›®

åˆ›å»ºæ–‡ä»¶è·¯å¾„é€‰æ‹©å™¨ã€‚

```lua
--file@å˜é‡å:é¡¹ç›®å
```

**ç¤ºä¾‹ï¼š**
```lua
--file@image_path:å›¾åƒæ–‡ä»¶
--file@video_path:è§†é¢‘æ–‡ä»¶

if image_path ~= "" then
    obj.load("image", image_path)
end
```

::: tip å…¼å®¹æ€§
æ—§è„šæœ¬æ–‡ä»¶æ ¼å¼: `--file:`
:::

### å­—ä½“è®¾ç½®é¡¹ç›®

åˆ›å»ºå­—ä½“é€‰æ‹©å™¨ã€‚

```lua
--font@å˜é‡å:é¡¹ç›®å,é»˜è®¤å€¼
```

**ç¤ºä¾‹ï¼š**
```lua
--font@main_font:ä¸»å­—ä½“,å¾®è½¯é›…é»‘
--font@title_font:æ ‡é¢˜å­—ä½“,Arial

obj.setfont(main_font, 24, 0, 0x000000, 0xffffff)
```

### å›¾å½¢è®¾ç½®é¡¹ç›®

åˆ›å»ºå›¾å½¢ç±»å‹é€‰æ‹©å™¨ã€‚

```lua
--figure@å˜é‡å:é¡¹ç›®å,é»˜è®¤å€¼
```

**ç¤ºä¾‹ï¼š**
```lua
--figure@shape:å›¾å½¢å½¢çŠ¶,åœ†å½¢
--figure@tip_shape:å°–ç«¯å›¾å½¢,ä¸‰è§’å½¢

obj.load("figure", shape, 0xffffff, 100)
```

### åˆ—è¡¨é€‰æ‹©é¡¹ç›®

åˆ›å»ºä¸‹æ‹‰åˆ—è¡¨é€‰æ‹©å™¨ã€‚

```lua
--select@å˜é‡å:é¡¹ç›®å=é»˜è®¤å€¼,é€‰é¡¹=å€¼,é€‰é¡¹=å€¼,é€‰é¡¹=å€¼
```

**å‚æ•°è¯´æ˜ï¼š**
- `é»˜è®¤å€¼`: å¯é€‰ï¼Œä¸æŒ‡å®šåˆ™ä½¿ç”¨ç¬¬ä¸€ä¸ªé€‰é¡¹
- `é€‰é¡¹=å€¼`: æ˜¾ç¤ºçš„é€‰é¡¹åç§°å’Œå¯¹åº”çš„æ•°å€¼

**ç¤ºä¾‹ï¼š**
```lua
--select@animation_type:åŠ¨ç”»ç±»å‹,çº¿æ€§åŠ¨ç”»=0,ç¼“åŠ¨åŠ¨ç”»=1,å¼¹æ€§åŠ¨ç”»=2,åå¼¹åŠ¨ç”»=3
--select@deco:è£…é¥°ç±»å‹=0,æ ‡å‡†æ–‡å­—=0,å¸¦å½±æ–‡å­—=1,å¸¦å½±æ–‡å­—(è–„)=2,æè¾¹æ–‡å­—=3,æè¾¹æ–‡å­—(ç»†)=4,æè¾¹æ–‡å­—(ç²—)=5,æè¾¹æ–‡å­—(è§’)=6

if animation_type == 0 then
    -- çº¿æ€§åŠ¨ç”»
    obj.ox = obj.ox + obj.time * 10
elseif animation_type == 1 then
    -- ç¼“åŠ¨åŠ¨ç”»
    local t = obj.time / 2
    obj.ox = obj.ox + (1 - math.cos(t * math.pi)) / 2 * 200
end
```

### æ–‡æœ¬è®¾ç½®é¡¹ç›®

åˆ›å»ºå¤šè¡Œæ–‡æœ¬è¾“å…¥æ¡†ã€‚

```lua
--text@å˜é‡å:é¡¹ç›®å,é»˜è®¤å€¼
```

**ç¤ºä¾‹ï¼š**
```lua
--text@content:æ–‡æœ¬å†…å®¹,"é»˜è®¤æ–‡å­—\nä¸‹ä¸€è¡Œ"

obj.load("text", content)
```

### å˜é‡é¡¹ç›®

åˆ›å»ºæ–‡æœ¬è¾“å…¥æ¡†ï¼Œæ”¯æŒå¤šç§æ•°æ®ç±»å‹ã€‚

```lua
--value@å˜é‡å:é¡¹ç›®å,é»˜è®¤å€¼
```

**æ•°æ®ç±»å‹è¯´æ˜ï¼š**
- **æ•°å€¼**: é»˜è®¤å€¼ä¸ºæ•°å­—
- **å­—ç¬¦ä¸²**: é»˜è®¤å€¼ä¸ºå¸¦å¼•å·çš„å­—ç¬¦ä¸²
- **æ•°ç»„**: é»˜è®¤å€¼ä¸ºèŠ±æ‹¬å·åŒ…å›´çš„æ•°ç»„

**ç¤ºä¾‹ï¼š**
```lua
--value@speed:ç§»åŠ¨é€Ÿåº¦,5.0
--value@message:æ˜¾ç¤ºæ–‡æœ¬,"Hello World"
--value@positions:ä½ç½®æ•°ç»„,{0,0,0}

obj.ox = obj.ox + speed * obj.time
obj.load("text", message)
```

### å…¶ä»–è®¾ç½®

#### å¯¹è±¡èœå•æ ‡ç­¾

```lua
--label:æ ‡ç­¾å
```

**ç¤ºä¾‹ï¼š**
```lua
--label:ç‰¹æ•ˆæ»¤é•œ
```

#### è„šæœ¬ä¿¡æ¯

```lua
--information:è„šæœ¬æè¿°ä¿¡æ¯
```

**ç¤ºä¾‹ï¼š**
```lua
--information:ç²’å­ç³»ç»Ÿæ•ˆæœ v3.0 by User
```

#### è„šæœ¬ç±»å‹æŒ‡å®š

```lua
--script:è„šæœ¬ç±»å‹
```

**ç¤ºä¾‹ï¼š**
```lua
--script:luaJIT  -- é»˜è®¤å€¼
--script:lua     -- æ ‡å‡†Lua
```

#### åƒç´ ç€è‰²å™¨

åœ¨è„šæœ¬æ–‡ä»¶å¼€å¤´ä½¿ç”¨å¤šè¡Œæ³¨é‡Šå®šä¹‰ HLSL åƒç´ ç€è‰²å™¨ï¼š

```hlsl
--[[pixelshader@ç€è‰²å™¨åç§°:
    float4 ç€è‰²å™¨åç§°(float4 pos : SV_Position) : SV_Target {
        // HLSL ä»£ç 
        return float4(1.0, 1.0, 1.0, 1.0);
    }
]]
```

#### è®¡ç®—ç€è‰²å™¨

```hlsl
--[[computeshader@ç€è‰²å™¨åç§°:
    [numthreads(1, 1, 1)]
    void ç€è‰²å™¨åç§°(uint2 id : SV_DispatchThreadID) {
        // HLSL è®¡ç®—ä»£ç 
    }
]]
```

::: warning æ³¨æ„
ç€è‰²å™¨åç§°å°†ä½œä¸ºå…¥å£ç‚¹å‡½æ•°åä½¿ç”¨ã€‚
:::

## å†…ç½®å˜é‡

ç›®æ ‡å¯¹è±¡çš„ä¿¡æ¯å­˜å‚¨åœ¨ä»¥ä¸‹å†…ç½®å˜é‡ä¸­ï¼š

| å˜é‡å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| `obj.x` | åªè¯» | æ˜¾ç¤ºåŸºå‡†åæ ‡ X |
| `obj.y` | åªè¯» | æ˜¾ç¤ºåŸºå‡†åæ ‡ Y |
| `obj.z` | åªè¯» | æ˜¾ç¤ºåŸºå‡†åæ ‡ Z |
| `obj.w` | åªè¯» | å›¾åƒå®½åº¦ |
| `obj.h` | åªè¯» | å›¾åƒé«˜åº¦ |
| `obj.ox` | è¯»å†™ | ç›¸å¯¹äºåŸºå‡†åæ ‡çš„ X åç§» |
| `obj.oy` | è¯»å†™ | ç›¸å¯¹äºåŸºå‡†åæ ‡çš„ Y åç§» |
| `obj.oz` | è¯»å†™ | ç›¸å¯¹äºåŸºå‡†åæ ‡çš„ Z åç§» |
| `obj.rx` | è¯»å†™ | X è½´æ—‹è½¬è§’åº¦ (360.0 = ä¸€åœˆ) |
| `obj.ry` | è¯»å†™ | Y è½´æ—‹è½¬è§’åº¦ (360.0 = ä¸€åœˆ) |
| `obj.rz` | è¯»å†™ | Z è½´æ—‹è½¬è§’åº¦ (360.0 = ä¸€åœˆ) |
| `obj.cx` | è¯»å†™ | ä¸­å¿ƒçš„ç›¸å¯¹ X åæ ‡ |
| `obj.cy` | è¯»å†™ | ä¸­å¿ƒçš„ç›¸å¯¹ Y åæ ‡ |
| `obj.cz` | è¯»å†™ | ä¸­å¿ƒçš„ç›¸å¯¹ Z åæ ‡ |
| `obj.zoom` | è¯»å†™ | ç¼©æ”¾ç‡ (1.0 = åŸå§‹å¤§å°) |
| `obj.alpha` | è¯»å†™ | ä¸é€æ˜åº¦ (0.0ï½1.0) |
| `obj.aspect` | è¯»å†™ | å®½é«˜æ¯” (-1.0ï½1.0) |
| `obj.framerate` | åªè¯» | å¸§ç‡ |
| `obj.frame` | åªè¯» | å½“å‰å¸§å· |
| `obj.time` | åªè¯» | å½“å‰æ—¶é—´(ç§’) |
| `obj.totalframe` | åªè¯» | æ€»å¸§æ•° |
| `obj.totaltime` | åªè¯» | æ€»æ—¶é—´(ç§’) |
| `obj.layer` | åªè¯» | ç»˜åˆ¶ç›®æ ‡å¯¹è±¡çš„å›¾å±‚ä½ç½® |
| `obj.index` | åªè¯» | å¤šå¯¹è±¡æ—¶çš„ç¼–å· |
| `obj.num` | åªè¯» | å¤šå¯¹è±¡æ—¶çš„æ•°é‡ |
| `obj.screen_w` | åªè¯» | å±å¹•å®½åº¦ |
| `obj.screen_h` | åªè¯» | å±å¹•é«˜åº¦ |

## æ‰©å±•å‡½æ•°

### æ–‡æœ¬å¤„ç†

#### obj.mes(text)

åœ¨æ–‡æœ¬å¯¹è±¡ä¸­æ’å…¥æŒ‡å®šæ–‡æœ¬ã€‚

```lua
obj.mes("è¦æ’å…¥çš„æ–‡æœ¬å†…å®¹")
```

**å‚æ•°ï¼š**
- `text` (string): è¦æ˜¾ç¤ºçš„æ–‡æœ¬

**ä½¿ç”¨é™åˆ¶ï¼š** åªèƒ½åœ¨æ–‡æœ¬å¯¹è±¡çš„æ–‡æœ¬å†…ä½¿ç”¨

**å…¼å®¹æ€§ï¼š** å¯çœç•¥ `obj.` ç›´æ¥ä½¿ç”¨ `mes()`

### ç‰¹æ•ˆå¤„ç†

#### obj.effect([name,param1,value1,param2,value2,...])

æ‰§è¡ŒæŒ‡å®šçš„æ»¤é•œæ•ˆæœã€‚

```lua
-- æ‰§è¡Œé»˜è®¤æ»¤é•œæ•ˆæœ
obj.effect()

-- æ‰§è¡ŒæŒ‡å®šæ»¤é•œæ•ˆæœ
obj.effect("è‰²è°ƒæ ¡æ­£", "äº®åº¦", 150, "è‰²ç›¸", 180)
```

**å‚æ•°ï¼š**
- `name` (string, å¯é€‰): ç‰¹æ•ˆåç§°
- `param1,value1` (å¯å˜å‚æ•°): ç‰¹æ•ˆå‚æ•°åå’Œå€¼

**ä½¿ç”¨é™åˆ¶ï¼š** ä»…åª’ä½“å¯¹è±¡å¯ç”¨

**ç‰¹æ®Šè¯´æ˜ï¼š**
- ä¸å¸¦å‚æ•°è°ƒç”¨æ—¶ï¼Œæ‰§è¡Œè„šæœ¬ä¹‹åçš„æ‰€æœ‰æ»¤é•œæ•ˆæœ
- è½¨é“æ¡ã€å¤é€‰æ¡†ä»¥å¤–çš„è®¾ç½®å‚æ•°ä½¿ç”¨åˆ«åæ–‡ä»¶ä¸­çš„åç§°å’Œå€¼
- æ—§è„šæœ¬æ–‡ä»¶å‚æ•°ä¼šè‡ªåŠ¨è½¬æ¢

### ç»˜åˆ¶å‡½æ•°

#### obj.draw([ox,oy,oz,zoom,alpha,rx,ry,rz])

ç»˜åˆ¶å½“å‰å¯¹è±¡ã€‚

```lua
-- ç®€å•ç»˜åˆ¶
obj.draw()

-- å¸¦å‚æ•°ç»˜åˆ¶
obj.draw(10, 20, 0, 1.5, 0.8, 0, 0, 45)
```

**å‚æ•°ï¼ˆå…¨éƒ¨å¯é€‰ï¼‰ï¼š**
- `ox`: ç›¸å¯¹ X åæ ‡
- `oy`: ç›¸å¯¹ Y åæ ‡
- `oz`: ç›¸å¯¹ Z åæ ‡
- `zoom`: ç¼©æ”¾ç‡ (1.0 = åŸå§‹å¤§å°)
- `alpha`: ä¸é€æ˜åº¦ (0.0-1.0)
- `rx`: X è½´æ—‹è½¬è§’åº¦
- `ry`: Y è½´æ—‹è½¬è§’åº¦
- `rz`: Z è½´æ—‹è½¬è§’åº¦

**æ³¨æ„ï¼š** ä½¿ç”¨æ­¤å‡½æ•°æ—¶ï¼Œè„šæœ¬ä¹‹åçš„æ»¤é•œæ•ˆæœå°†ä¸ä¼šæ‰§è¡Œ

#### obj.drawpoly(x0,y0,z0,x1,y1,z1,x2,y2,z2,x3,y3,z3[,u0,v0,u1,v1,u2,v2,u3,v3,alpha])

ä»¥ä»»æ„å››è¾¹å½¢ç»˜åˆ¶å¯¹è±¡ä»»æ„éƒ¨åˆ†ã€‚

```lua
-- ç®€å•å››è¾¹å½¢ç»˜åˆ¶
obj.drawpoly(-50,-50,0, 50,-50,0, 50,50,0, -50,50,0)

-- å¸¦çº¹ç†åæ ‡çš„ç»˜åˆ¶
obj.drawpoly(-50,-50,0, 50,-50,0, 50,50,0, -50,50,0,
             0,0, obj.w,0, obj.w,obj.h, 0,obj.h)
```

**å‚æ•°ï¼š**
- `x0,y0,z0` ~ `x3,y3,z3`: å››ä¸ªé¡¶ç‚¹çš„åæ ‡
- `u0,v0` ~ `u3,v3` (å¯é€‰): å¯¹åº”çš„çº¹ç†åæ ‡
- `alpha` (å¯é€‰): ä¸é€æ˜åº¦

**é™åˆ¶ï¼š** å†…è§’å¿…é¡»å…¨éƒ¨å°äº180åº¦

#### obj.drawpoly({table}[,vertex_num,alpha])

ä½¿ç”¨è¡¨æ ¼å½¢å¼æ‰¹é‡ç»˜åˆ¶å¤šä¸ªå››è¾¹å½¢æˆ–é¡¶ç‚¹åˆ—è¡¨ã€‚

```lua
-- æ‰¹é‡ç»˜åˆ¶å››è¾¹å½¢
local vertices = {}

-- æ·»åŠ ç¬¬ä¸€ä¸ªå››è¾¹å½¢
table.insert(vertices, {x0,y0,0,x1,y1,0,x2,y2,0,x3,y3,0,u0,v0,u1,v1,u2,v2,u3,v3})

-- æ·»åŠ ç¬¬äºŒä¸ªå››è¾¹å½¢
table.insert(vertices, {x0,y0,100,x1,y1,100,x2,y2,100,x3,y3,100,u0,v0,u1,v1,u2,v2,u3,v3})

-- æ‰¹é‡ç»˜åˆ¶
obj.drawpoly(vertices)

-- é¡¶ç‚¹åˆ—è¡¨æ–¹å¼ç»˜åˆ¶ä¸‰è§’å½¢
vertex={}
table.insert(vertex,{0,  0,  0, 0,0})
table.insert(vertex,{100,0,  0, 1,0})
table.insert(vertex,{100,100,0, 1,1})
obj.drawpoly(vertex)
vertex={}
for z=100,1000,100 do
    table.insert(vertex,{0,  0,  z, 1,1,1,1})
    table.insert(vertex,{100,0,  z, 1,1,1,1})
    table.insert(vertex,{100,100,z, 1,1,1,1})
end
obj.drawpoly(vertex,3)  -- 3è¡¨ç¤ºä¸‰è§’å½¢
```

**å‚æ•°ï¼š**
- `vertex_num` (å¯é€‰): é¢é¡¶ç‚¹æ•° (4=å››è¾¹å½¢, 3=ä¸‰è§’å½¢)
- `alpha` (å¯é€‰): ä¸é€æ˜åº¦

**æ”¯æŒçš„è¡¨æ ¼æ ¼å¼ï¼š**
- å››è¾¹å½¢æ ¼å¼: `{x0,y0,z0,x1,y1,z1,x2,y2,z2,x3,y3,z3,u0,v0,u1,v1,u2,v2,u3,v3}`
- å¸¦æ³•çº¿: `{x0,y0,z0,x1,y1,z1,x2,y2,z2,x3,y3,z3,u0,v0,u1,v1,u2,v2,u3,v3,vx0,vy0,vz0,vx1,vy1,vz1,vx2,vy2,vz2,vx3,vy3,vz3}`
- é¢œè‰²æ¨¡å¼: `{x0,y0,z0,x1,y1,z1,x2,y2,z2,x3,y3,z3,r0,g0,b0,a0,r1,g1,b1,a1,r2,g2,b2,a2,r3,g3,b3,a3}`
- å®Œæ•´æ ¼å¼: `{x0,y0,z0,x1,y1,z1,x2,y2,z2,x3,y3,z3,r0,g0,b0,a0,r1,g1,b1,a1,r2,g2,b2,a2,r3,g3,b3,a3,vx0,vy0,vz0,vx1,vy1,vz1,vx2,vy2,vz2,vx3,vy3,vz3}`
- é¡¶ç‚¹åˆ—è¡¨æ ¼å¼: `{x,y,z,u,v}` æˆ– `{x,y,z,u,v,vx,vy,vz}` æˆ– `{x,y,z,r,g,b,a}` æˆ– `{x,y,z,r,g,b,a,vx,vy,vz}`

### å›¾åƒåŠ è½½

#### obj.load([type],...)

åŠ è½½å½“å‰å¯¹è±¡çš„å›¾åƒã€‚

```lua
-- è‡ªåŠ¨ç±»å‹è¯†åˆ«
obj.load("image.jpg")

-- æŒ‡å®šç±»å‹åŠ è½½
obj.load("image", "photo.png")
```

**æ”¯æŒçš„ç±»å‹ï¼š**

**è§†é¢‘æ–‡ä»¶**
```lua
obj.load("movie", "video.avi"[, time])
```
- `time` (å¯é€‰): æŒ‡å®šæ—¶é—´(ç§’)ï¼Œçœç•¥æ—¶ä½¿ç”¨å¯¹è±¡å½“å‰æ—¶é—´
- **è¿”å›å€¼**: è§†é¢‘æ€»æ—¶é•¿(ç§’)

**å›¾åƒæ–‡ä»¶**
```lua
obj.load("image", "photo.png")
```

**æ–‡æœ¬æ¸²æŸ“**
```lua
obj.load("text", "Hello World"[, speed, time])
```
- `speed` (å¯é€‰): æ¯ç§’æ˜¾ç¤ºå­—ç¬¦æ•°
- `time` (å¯é€‰): ç›¸å¯¹äºspeedçš„ç»è¿‡æ—¶é—´

**å›¾å½¢ç»˜åˆ¶**
```lua
obj.load("figure", name[, color, size, line, round])
```
- `name`: å›¾å½¢åç§°æˆ–SVGæ–‡ä»¶å
- `color`: é¢œè‰²å€¼ (0x000000~0xffffff)
- `size`: å›¾å½¢å¤§å°
- `line`: çº¿æ¡å®½åº¦
- `round`: æ˜¯å¦åœ†è§’ (true/false)

**å¸§ç¼“å†²åŒº**
```lua
obj.load("framebuffer"[, x, y, w, h, alpha])
```
- `x,y,w,h` (å¯é€‰): è·å–èŒƒå›´ï¼Œçœç•¥æ—¶ä¸ºå…¨éƒ¨
- `alpha`: æ˜¯å¦ä¿æŒé€æ˜åº¦ (true/false)

**è™šæ‹Ÿç¼“å†²åŒº**
```lua
obj.load("tempbuffer"[, x, y, w, h])
```

**å›¾å±‚å¯¹è±¡**
```lua
obj.load("layer", layerNo[, effect])
```
- `layerNo`: å›¾å±‚ç¼–å· (1~)
- `effect`: æ˜¯å¦åº”ç”¨ç‰¹æ•ˆ (true/false)

**å‰ä¸€ä¸ªå¯¹è±¡**
```lua
obj.load("before")
```

### å­—ä½“è®¾ç½®

#### obj.setfont(name, size[, type, col1, col2])

è®¾ç½®æ–‡æœ¬æ¸²æŸ“å­—ä½“ã€‚

```lua
-- åŸºæœ¬è®¾ç½®
obj.setfont("å¾®è½¯é›…é»‘", 24)

-- å®Œæ•´è®¾ç½®
obj.setfont("Arial", 36, 1, 0x000000, 0x888888)
```

**å‚æ•°ï¼š**
- `name`: å­—ä½“åç§°
- `size`: å­—ä½“å¤§å°
- `type` (å¯é€‰): æ–‡å­—è£…é¥°ç±»å‹ (0-6)
- `col1` (å¯é€‰): æ–‡å­—é¢œè‰²
- `col2` (å¯é€‰): é˜´å½±/æè¾¹é¢œè‰²

**è£…é¥°ç±»å‹ï¼š**
- `0`: æ ‡å‡†æ–‡å­—
- `1`: å¸¦å½±æ–‡å­—
- `2`: å¸¦å½±æ–‡å­—(è–„)
- `3`: æè¾¹æ–‡å­—
- `4`: æè¾¹æ–‡å­—(ç»†)
- `5`: æè¾¹æ–‡å­—(ç²—)
- `6`: æè¾¹æ–‡å­—(è§’)

### éšæœºæ•°ç”Ÿæˆ

#### obj.rand(st_num, ed_num[, seed, frame])

ç”Ÿæˆéšæœºæ•°ã€‚ä¸æ™®é€šéšæœºæ•°ä¸åŒï¼Œåœ¨åŒä¸€æ—¶é—´çš„å¸§ä¸­å§‹ç»ˆç”Ÿæˆç›¸åŒçš„å€¼ã€‚

```lua
-- åŸºæœ¬éšæœºæ•°
local value = obj.rand(1, 100)

-- å¸¦ç§å­æ§åˆ¶çš„éšæœºæ•°
local value = obj.rand(0, 255, 12345)
```

**å‚æ•°ï¼š**
- `st_num`: æœ€å°å€¼
- `ed_num`: æœ€å¤§å€¼
- `seed` (å¯é€‰): éšæœºæ•°ç§å­
- `frame` (å¯é€‰): å¸§å·

**å…¼å®¹æ€§ï¼š** å¯çœç•¥ `obj.` ç›´æ¥ä½¿ç”¨ `rand()`

### é€‰é¡¹è®¾ç½®

#### obj.setoption(name, value)

è®¾ç½®å¯¹è±¡çš„å„ç§é€‰é¡¹ã€‚

```lua
-- éšè—èƒŒé¢
obj.setoption("culling", 1)

-- è®¾ç½®æ··åˆæ¨¡å¼
obj.setoption("blend", "add")

-- è®¾ç½®ç»˜åˆ¶ç›®æ ‡
obj.setoption("drawtarget", "tempbuffer", 1920, 1080)
```

**ä¸»è¦é€‰é¡¹ï¼š**

**æ˜¾ç¤ºé€‰é¡¹**
- `culling`: èƒŒé¢æ˜¾ç¤º (0=æ˜¾ç¤º, 1=éšè—)
- `billboard`: æœå‘ç›¸æœº (0=ä¸æœå‘, 1=ä»…æ¨ªå‘, 2=ä»…çºµå‘, 3=æœå‘)

**æ··åˆæ¨¡å¼**
- `blend`: åˆæˆæ¨¡å¼
  - `"none"`: æ™®é€š
  - `"add"`: åŠ ç®—
  - `"sub"`: å‡ç®—
  - `"mul"`: ä¹˜ç®—
  - `"screen"`: å±å¹•
  - `"overlay"`: å åŠ 
  - `"light"`: æ¯”è¾ƒ(æ˜)
  - `"dark"`: æ¯”è¾ƒ(æš—)
  - `"brightness"`: äº®åº¦
  - `"chroma"`: è‰²å·®
  - `"shadow"`: é˜´å½±
  - `"light_dark"`: æ˜æš—
  - `"diff"`: è‰²å·®

**ç¼“å†²åŒºé€‰é¡¹**
- `drawtarget`: ç»˜åˆ¶ç›®æ ‡
  - `"tempbuffer"[,width,height]: è™šæ‹Ÿç¼“å†²åŒº
  - `"framebuffer"`: å¸§ç¼“å†²åŒº

**ç›¸æœºé€‰é¡¹**
- `camera_param`: ç›¸æœºå‚æ•° (ä»…ç›¸æœºæ•ˆæœå¯ç”¨)

**å…¶ä»–é€‰é¡¹**
- `draw_state`: ç»˜åˆ¶çŠ¶æ€ (true/false)
- `focus_mode`: ç„¦ç‚¹æ¡†æ¨¡å¼
- `sampler`: é‡‡æ ·å™¨æ¨¡å¼ ("clip"/"clamp"/"loop")

### ä¿¡æ¯è·å–

#### obj.getoption(name,...)

è·å–å¯¹è±¡çš„å„ç§é€‰é¡¹ä¿¡æ¯ã€‚

```lua
-- è·å–GUIæ˜¾ç¤ºçŠ¶æ€
local gui_visible = obj.getoption("gui")

-- è·å–ç›¸æœºå‚æ•°
local cam = obj.getoption("camera_param")

-- è·å–è„šæœ¬å
local script_name = obj.getoption("script_name")
```

**ä¸»è¦é€‰é¡¹ï¼š**
- `track_mode`: è½¨é“æ¡ç§»åŠ¨æ¨¡å¼
- `section_num`: å¯¹è±¡åŒºé—´æ•°
- `script_name`: è„šæœ¬åç§°
- `gui`: GUIæ˜¾ç¤ºçŠ¶æ€
- `camera_mode`: ç›¸æœºæ§åˆ¶çŠ¶æ€
- `camera_param`: ç›¸æœºå‚æ•°
- `multi_object`: å¤šå¯¹è±¡å¯ç”¨çŠ¶æ€

#### obj.getinfo(name,...)

è·å–ç¯å¢ƒä¿¡æ¯ã€‚

```lua
-- è·å–è„šæœ¬æ–‡ä»¶å¤¹è·¯å¾„
local script_path = obj.getinfo("script_path")

-- æ£€æŸ¥æ˜¯å¦æ­£åœ¨è¾“å‡ºè§†é¢‘
local saving = obj.getinfo("saving")

-- è·å–åº”ç”¨å¯åŠ¨æ—¶é—´
local clock = obj.getinfo("clock")

-- è·å–è„šæœ¬å¤„ç†æ—¶é—´
local script_time = obj.getinfo("script_time")
```

**ä¸»è¦é€‰é¡¹ï¼š**
- `script_path`: è„šæœ¬æ–‡ä»¶å¤¹è·¯å¾„
- `saving`: æ˜¯å¦æ­£åœ¨è¾“å‡ºè§†é¢‘ (true/false)
- `image_max`: æœ€å¤§å›¾åƒå°ºå¯¸ (width, height)
- `clock`: åº”ç”¨å¯åŠ¨åçš„ç»è¿‡æ—¶é—´(ç§’)
- `script_time`: è„šæœ¬æ‰§è¡Œå¼€å§‹åçš„ç»è¿‡æ—¶é—´(æ¯«ç§’)

#### obj.getvalue(target[, time, section])

è·å–å¯¹è±¡çš„å€¼ã€‚

```lua
-- è·å–è½¨é“æ¡å€¼
local track_value = obj.getvalue(0)
local custom_value = obj.getvalue("x")

-- è·å–ç‰¹å®šæ—¶é—´çš„å€¼
local past_value = obj.getvalue("zoom", 5.0)
```

**å‚æ•°ï¼š**
- `target`: è®¾ç½®ç±»å‹ (0-3, "x", "y", "z", "rx", "ry", "rz", "cx", "cy", "cz", "zoom", "alpha", "aspect", "time", "layer*")
- `time` (å¯é€‰): ç‰¹å®šæ—¶é—´ç‚¹
- `section` (å¯é€‰): åŒºé—´ç¼–å·

### åƒç´ æ“ä½œ

#### obj.getpixel(x, y[, type])

è·å–å¯¹è±¡çš„åƒç´ ä¿¡æ¯ã€‚

```lua
-- è·å–é¢œè‰²å’Œé€æ˜åº¦
local col, alpha = obj.getpixel(100, 100, "col")

-- è·å–RGBAå€¼
local r, g, b, a = obj.getpixel(100, 100, "rgb")

-- è·å–å›¾åƒå°ºå¯¸
local width, height = obj.getpixel()
```

**å‚æ•°ï¼š**
- `x,y`: åƒç´ åæ ‡
- `type` (å¯é€‰): ä¿¡æ¯ç±»å‹
  - `"col"`: é¢œè‰²å’Œé€æ˜åº¦
  - `"rgb"`: RGBAå€¼
  - `"yc"`: YCbCrå€¼

**è¿”å›å€¼ï¼š**
- æ— å‚æ•°: å›¾åƒå®½åº¦å’Œé«˜åº¦
- `type="col"`: é¢œè‰²å€¼(0x000000~0xffffff), é€æ˜åº¦(0.0~1.0)
- `type="rgb"`: R,G,B,A å€¼ (0~255)
- `type="yc"`: Y,Cb,Cr,A å€¼

::: tip åƒç´ æ“ä½œåº”ç”¨åœºæ™¯
- **å›¾åƒåˆ†æ**: æ£€æµ‹å›¾åƒç‰¹å®šåŒºåŸŸçš„é¢œè‰²
- **åŠ¨æ€æ•ˆæœ**: æ ¹æ®åƒç´ å€¼åˆ›å»ºå“åº”å¼åŠ¨ç”»
- **é®ç½©æ•ˆæœ**: åŸºäºåƒç´ ä¿¡æ¯åˆ›å»ºä¸è§„åˆ™é®ç½©
- **ç²’å­ç³»ç»Ÿ**: ä»å›¾åƒç”Ÿæˆç²’å­æ•ˆæœ
:::

::: warning æ€§èƒ½æ³¨æ„äº‹é¡¹
- åƒç´ æ“ä½œç›¸å¯¹è€—è´¹æ€§èƒ½ï¼Œå°½é‡å‡å°‘è°ƒç”¨é¢‘ç‡
- å¯¹äºå¤§å›¾åƒï¼Œè€ƒè™‘ä½¿ç”¨ç¼“å­˜æœºåˆ¶
- é¿å…åœ¨å¾ªç¯ä¸­é¢‘ç¹è°ƒç”¨
:::

#### obj.putpixel(x,y,...)

å†™å…¥å¯¹è±¡çš„åƒç´ ä¿¡æ¯ã€‚

```lua
-- å†™å…¥é¢œè‰²å’Œé€æ˜åº¦
obj.putpixel(100, 100, 0xff0000, 0.8)

-- å†™å…¥RGBAå€¼
obj.putpixel(100, 100, 255, 0, 0, 128)

-- å†™å…¥YCbCrå€¼
obj.putpixel(100, 100, y, cb, cr, a)
```

**å‚æ•°ï¼š**
- `x,y`: å†™å…¥çš„åƒç´ åæ ‡
- åƒç´ ä¿¡æ¯ç±»å‹å–å†³äº `obj.pixeloption("type")` çš„è®¾ç½®
  - `type="col"`: é¢œè‰²å€¼(0x000000~0xffffff), é€æ˜åº¦(0.0~1.0)
  - `type="rgb"`: R,G,B,A å€¼ (0~255)
  - `type="yc"`: Y,Cb,Cr,A å€¼

#### obj.copypixel(dst_x, dst_y, src_x, src_y)

å¤åˆ¶å¯¹è±¡çš„åƒç´ ä¿¡æ¯ã€‚

```lua
-- å¤åˆ¶åƒç´ 
obj.copypixel(200, 200, 100, 100)
```

**å‚æ•°ï¼š**
- `dst_x,dst_y`: å¤åˆ¶ç›®æ ‡åæ ‡
- `src_x,src_y`: å¤åˆ¶æºåæ ‡

#### obj.pixeloption(name, value)

è®¾ç½®åƒç´ æ“ä½œçš„å¤„ç†é€‰é¡¹ã€‚

```lua
-- è®¾ç½®åƒç´ ä¿¡æ¯ç±»å‹
obj.pixeloption("type", "rgb")

-- è®¾ç½®è¯»å–æº
obj.pixeloption("get", "framebuffer")

-- è®¾ç½®å†™å…¥ç›®æ ‡
obj.pixeloption("put", "object")

-- è®¾ç½®æ··åˆç±»å‹
obj.pixeloption("blend", 0)
```

**å‚æ•°ï¼š**
- `name`: é€‰é¡¹å
- `value`: é€‰é¡¹å€¼

**ä¸»è¦é€‰é¡¹ï¼š**
- `type`: åƒç´ ä¿¡æ¯ç±»å‹ ("col"/"rgb"/"yc")
- `get`: è¯»å–æº ("object"/"framebuffer")
- `put`: å†™å…¥ç›®æ ‡ ("object"/"framebuffer")
- `blend`: æ··åˆç±»å‹ (0=æ›¿æ¢, 1=åŠ ç®—, 2=å‡ç®—, 3=ä¹˜ç®—)

### éŸ³é¢‘å¤„ç†

#### obj.getaudio(buf, file, type, size)

ä»éŸ³å£°æ–‡ä»¶è·å–éŸ³é¢‘æ•°æ®ã€‚

```lua
-- è·å–PCMæ•°æ®
local n, rate = obj.getaudio(buf, "audio.wav", "pcm", 1000)

-- è·å–é¢‘è°±æ•°æ®
local n, rate = obj.getaudio(buf, "audiobuffer", "spectrum", 32)

-- è·å–å‚…é‡Œå¶å˜æ¢æ•°æ®
local n, rate, buf = obj.getaudio(nil, "audio.wav", "fourier", 0)
```

**å‚æ•°ï¼š**
- `buf`: æ•°æ®æ¥æ”¶è¡¨æ ¼ (nilæ—¶é€šè¿‡è¿”å›å€¼è·å–)
- `file`: éŸ³å£°æ–‡ä»¶è·¯å¾„ ("audiobuffer"è¡¨ç¤ºç¼–è¾‘ä¸­çš„éŸ³å£°æ•°æ®)
- `type`: æ•°æ®ç±»å‹
  - `"pcm"`: PCMé‡‡æ ·æ•°æ®
  - `"spectrum"`: é¢‘ç‡é¢‘è°±æ•°æ®
  - `"fourier"`: å‚…é‡Œå¶å˜æ¢æ•°æ®
- `size`: è·å–æ•°æ®æ•°é‡

**è¿”å›å€¼ï¼š**
- `è·å–æ•°é‡, é‡‡æ ·ç‡[, æ•°æ®è¡¨æ ¼]`

### ç¼“å†²åŒºæ“ä½œ

#### obj.copybuffer(dst, src)

å¤åˆ¶å›¾åƒç¼“å†²åŒºã€‚

```lua
-- å¯¹è±¡ -> è™šæ‹Ÿç¼“å†²åŒº
obj.copybuffer("tempbuffer", "object")

-- è™šæ‹Ÿç¼“å†²åŒº -> å¯¹è±¡
obj.copybuffer("object", "tempbuffer")

-- å¸§ç¼“å†²åŒº -> ç¼“å­˜ç¼“å†²åŒº
obj.copybuffer("cache:buffer1", "framebuffer")

-- å›¾åƒæ–‡ä»¶ -> å¯¹è±¡
obj.copybuffer("object", "image:photo.png")
```

**å‚æ•°ï¼š**
- `dst`: ç›®æ ‡ç¼“å†²åŒº
- `src`: æºç¼“å†²åŒº

**ç¼“å†²åŒºç±»å‹ï¼š**
- `"tempbuffer"`: è™šæ‹Ÿç¼“å†²åŒº
- `"object"`: å½“å‰å¯¹è±¡
- `"framebuffer"`: å¸§ç¼“å†²åŒº
- `"cache:name"`: ç¼“å­˜ç¼“å†²åŒº
- `"image:path"`: å›¾åƒæ–‡ä»¶

#### obj.clearbuffer(target[, color])

æ¸…é™¤å›¾åƒç¼“å†²åŒºã€‚

```lua
-- æ¸…é™¤è™šæ‹Ÿç¼“å†²åŒºä¸ºé€æ˜
obj.clearbuffer("tempbuffer")

-- æ¸…é™¤å¯¹è±¡ä¸ºç™½è‰²
obj.clearbuffer("object", 0xffffff)
```

**å‚æ•°ï¼š**
- `target`: ç›®æ ‡ç¼“å†²åŒº
- `color` (å¯é€‰): æ¸…é™¤é¢œè‰²ï¼Œçœç•¥æ—¶ä¸ºé€æ˜

### ç€è‰²å™¨æ“ä½œ

#### obj.pixelshader(name, target, resource, constant, blend)

æ‰§è¡Œåƒç´ ç€è‰²å™¨ã€‚

```lua
-- ç®€å•ç€è‰²å™¨è°ƒç”¨
obj.pixelshader("psmain", "object", nil, {bright/100}, "add")

-- å¸¦çº¹ç†çš„ç€è‰²å™¨
obj.pixelshader("psmain", "object", "tempbuffer", {time, 0.5}, "copy")
```

**å‚æ•°ï¼š**
- `name`: ç€è‰²å™¨åç§°
- `target`: è¾“å‡ºç›®æ ‡ç¼“å†²åŒº
- `resource`: å¼•ç”¨ç¼“å†²åŒº (æ•°ç»„æˆ–å•ä¸ªç¼“å†²åŒºå)
- `constant`: å¸¸é‡æ•°ç»„ (ä¼ é€’ç»™ç€è‰²å™¨çš„å‚æ•°)
- `blend`: æ··åˆæ–¹å¼

**æ··åˆæ–¹å¼ï¼š**
- `"copy"`: ç›´æ¥å¤åˆ¶
- `"mask"`: ä»…ä½¿ç”¨é€æ˜åº¦
- `"draw"`: é€æ˜åº¦æ··åˆ
- `"add"`: åŠ ç®—åˆæˆ

#### obj.computeshader(name, target, resource, constant, countX, countY, countZ)

æ‰§è¡Œè®¡ç®—ç€è‰²å™¨ã€‚

```lua
-- è®¡ç®—ç€è‰²å™¨è°ƒç”¨
obj.computeshader("csmain", {"object"}, {"tempbuffer"}, {time}, 32, 32, 1)
```

### è½¨é“æ¡æ“ä½œ

#### obj.getpoint(target[, option])

è·å–è½¨é“æ¡çš„å€¼ã€‚

```lua
-- è·å–æŒ‡å®šåŒºé—´çš„è½¨é“æ¡å€¼
local value = obj.getpoint(0)

-- è·å–å½“å‰åŒºé—´çš„ç´¢å¼•
local index = obj.getpoint("index")

-- è·å–åŒºé—´çš„æ€»æ•°
local num = obj.getpoint("num")

-- è·å–å½“å‰æ—¶é—´
local time = obj.getpoint("time")

-- æ£€æŸ¥æ˜¯å¦è®¾ç½®äº†åŠ é€Ÿ
local accelerate = obj.getpoint("accelerate")

-- æ£€æŸ¥æ˜¯å¦è®¾ç½®äº†å‡é€Ÿ
local decelerate = obj.getpoint("decelerate")

-- è·å–è½¨é“æ¡å‚æ•°
local param = obj.getpoint("param")

-- è·å–ç›¸å…³è½¨é“çš„ç´¢å¼•å’Œæ€»æ•°
local index, num = obj.getpoint("link")

-- è·å–æ—¶é—´æ§åˆ¶çš„å€¼
local time_value = obj.getpoint("timecontrol", "time")

-- è·å–å¸§ç‡
local framerate = obj.getpoint("framerate")
```

**å‚æ•°ï¼š**
- `target`: è·å–ç›®æ ‡
- `option` (å¯é€‰): é™„åŠ é€‰é¡¹

### é”šç‚¹æ“ä½œ

#### obj.setanchor(name, num[, option,...])

æ˜¾ç¤ºå’Œæ§åˆ¶é”šç‚¹ã€‚

```lua
-- åŸºæœ¬é”šç‚¹è®¾ç½®
obj.setanchor("pos", 3)

-- å¸¦é€‰é¡¹çš„é”šç‚¹
local count = obj.setanchor("track", 0, "line", "color", 0xff0000)
```

**å‚æ•°ï¼š**
- `name`: åæ ‡å˜é‡åæˆ– "track"
- `num`: é”šç‚¹æ•°é‡
- `option`: å„ç§é€‰é¡¹

**ä¸»è¦é€‰é¡¹ï¼š**
- `"line"`: è¿æ¥é”šç‚¹çš„çº¿æ¡
- `"loop"`: å¾ªç¯è¿æ¥é”šç‚¹
- `"star"`: ä¸­å¿ƒç‚¹è¿æ¥
- `"arm"`: é”šç‚¹åˆ°ä¸­å¿ƒè¿æ¥
- `"color"`: è®¾ç½®çº¿æ¡é¢œè‰²
- `"inout"`: IN/OUTä¸¤ä¾§æ˜¾ç¤º
- `"xyz"`: 3Dåæ ‡æ§åˆ¶

### æ•°å­¦å·¥å…·

#### obj.interpolation(time, x0,y0,z0, x1,y1,z1, x2,y2,z2, x3,y3,z3)

è®¡ç®—è¿ç»­ç‚¹ä¹‹é—´çš„æ’å€¼ã€‚

```lua
-- 2Dæ’å€¼
local x, y = obj.interpolation(t, x0,y0, x1,y1, x2,y2, x3,y3)

-- 3Dæ’å€¼
local x, y, z = obj.interpolation(t, x0,y0,z0, x1,y1,z1, x2,y2,z2, x3,y3,z3)
```

**å‚æ•°ï¼š**
- `time`: æ—¶é—´å‚æ•° (0.0~1.0)
- `x0,y0,z0` ~ `x3,y3,z3`: å››ä¸ªæ§åˆ¶ç‚¹çš„åæ ‡

#### RGB(r,g,b) / RGB(color)

é¢œè‰²å€¼ä¸RGBåˆ†é‡çš„ç›¸äº’è½¬æ¢ã€‚

```lua
-- RGBè½¬é¢œè‰²å€¼
local color = RGB(255, 0, 0)

-- é¢œè‰²å€¼è½¬RGB
local r, g, b = RGB(0xff0000)

-- æ—¶é—´å˜åŒ–çš„é¢œè‰²
local color = RGB(255,0,0, 0,255,0)
```

#### HSV(h,s,v) / HSV(color)

é¢œè‰²å€¼ä¸HSVåˆ†é‡çš„ç›¸äº’è½¬æ¢ã€‚

```lua
-- HSVè½¬é¢œè‰²å€¼
local color = HSV(0, 100, 100)

-- é¢œè‰²å€¼è½¬HSV
local h, s, v = HSV(0xff0000)

-- æ—¶é—´å˜åŒ–çš„é¢œè‰²
local color = HSV(0,100,100, 120,100,100)
```

#### OR(a,b) / AND(a,b) / XOR(a,b)

ä½è¿ç®—å‡½æ•°ã€‚

```lua
local result_or = OR(a, b)
local result_and = AND(a, b)
local result_xor = XOR(a, b)
```

#### SHIFT(a, shift)

ç§»ä½è¿ç®—ã€‚

```lua
-- å·¦ç§»ä½
local result = SHIFT(value, 2)

-- å³ç§»ä½
local result = SHIFT(value, -1)
```

#### rotation(x0,y0,x1,y1,x2,y2,x3,y3,zoom,r)

åæ ‡æ—‹è½¬å˜æ¢ã€‚

```lua
-- æ—‹è½¬å››ä¸ªé¡¶ç‚¹åæ ‡
local x0,y0,x1,y1,x2,y2,x3,y3 = rotation(x0,y0,x1,y1,x2,y2,x3,y3,1.0,45)
```

### è°ƒè¯•å·¥å…·

#### debug_print(text)

è¾“å‡ºè°ƒè¯•ä¿¡æ¯åˆ°æ—¥å¿—ã€‚

```lua
debug_print("å½“å‰æ—¶é—´: " .. obj.time)
debug_print(string.format("ä½ç½®: (%.2f, %.2f)", obj.ox, obj.oy))
```

**å‚æ•°ï¼š**
- `text`: è°ƒè¯•ä¿¡æ¯æ–‡æœ¬

## ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€ç¤ºä¾‹

#### æ–‡æœ¬ä¸­çš„è„šæœ¬ä½¿ç”¨

```
å½“å‰å¯¹è±¡æ—¶é—´=<?mes(string.format("%02d:%02d.%02d",obj.time/60,obj.time%60,(obj.time*100)%100))?>
```

#### æ—¶é—´å˜åŒ–åŠ¨ç”»

```lua
-- éšæ—¶é—´å‘å³ç§»åŠ¨å¹¶æ—‹è½¬
obj.ox = obj.ox + obj.time * 10
obj.rz = obj.rz + obj.time * 360
```

#### ç‰¹æ•ˆåº”ç”¨

```lua
-- äº®åº¦å‘¼å¸æ•ˆæœ
local intensity = math.cos(obj.time * math.pi * 2) * 50
obj.effect("è‰²è°ƒæ ¡æ­£", "äº®åº¦", 100 + intensity)
```

### ä¸­çº§ç¤ºä¾‹

#### ç²’å­ç³»ç»Ÿ

```lua
--track@particle_count:ç²’å­æ•°é‡,10,1000,100
--track@speed:é€Ÿåº¦,0.1,10,1
--color@particle_color:ç²’å­é¢œè‰²,0xffffff

obj.setoption("drawtarget", "tempbuffer", 1920, 1080)

for i = 1, particle_count do
    local seed = 1000 + i
    local x = obj.rand(-obj.w/2, obj.w/2, seed)
    local y = obj.rand(-obj.h/2, obj.h/2, seed + 1)
    local life = obj.time * speed - obj.rand(0, 100, seed + 2) / 10

    if life > 0 then
        local alpha = math.min(1.0, life * 0.1)
        obj.draw(x, y, 0, 0.1, alpha)
    end
end

obj.load("tempbuffer")
obj.setoption("drawtarget", "framebuffer")
```

#### å¤šè¾¹å½¢åŠ¨ç”»

```lua
--value@radius:åŠå¾„,100
--track@rotation_speed:æ—‹è½¬é€Ÿåº¦,0,10,1
--track@vertex_count:é¡¶ç‚¹æ•°é‡,3,20,6

local vertices = {}

for i = 0, vertex_count - 1 do
    local angle = (i / vertex_count + obj.time * rotation_speed) * 2 * math.pi
    local x = math.cos(angle) * radius
    local y = math.sin(angle) * radius
    table.insert(vertices, {x, y, 0})
end

-- é—­åˆå¤šè¾¹å½¢
local last = vertices[#vertices]
table.insert(vertices, {last[1], last[2], 0})

obj.drawpoly(vertices)
```

### é«˜çº§ç¤ºä¾‹

#### åƒç´ ç€è‰²å™¨ä½¿ç”¨

```lua
--track@bright:äº®åº¦,-100,100,0,0.01

--[[pixelshader@psmain:
cbuffer constant0 : register(b0) {
    float bright;
};
float4 psmain(float4 pos : SV_Position) : SV_Target {
    return float4(bright, bright, bright, 1);
}
]]

obj.pixelshader("psmain", "object", nil, {bright/100}, "add")
```

#### éŸ³é¢‘å¯è§†åŒ–

```lua
--value@bar_count:æŸ±çŠ¶å›¾æ•°é‡,32
--track@sensitivity:çµæ•åº¦,0.1,5,1

local buf = {}
local n = obj.getaudio(buf, "audiobuffer", "spectrum", bar_count)

obj.setoption("drawtarget", "tempbuffer", obj.w, obj.h)
obj.clearbuffer("tempbuffer", 0x000000)

for i = 1, n do
    local height = buf[i] * sensitivity * obj.h
    local x = (i - 1) * (obj.w / bar_count)
    local y = obj.h - height

    -- ç»˜åˆ¶é¢‘è°±æ¡
    obj.load("figure", "å››è§’å½¢", 0x00ff00, obj.w / bar_count, 0, false)
    obj.draw(x, y)
end

obj.load("tempbuffer")
obj.setoption("drawtarget", "framebuffer")
```

#### 3D æ—‹è½¬æ•ˆæœ

```lua
--track@rotate_x:Xè½´æ—‹è½¬,0,360,0
--track@rotate_y:Yè½´æ—‹è½¬,0,360,0
--track@rotate_z:Zè½´æ—‹è½¬,0,360,0
--track@distance:è·ç¦»,100,1000,300

-- è®¾ç½®é”šç‚¹ç”¨äº3Dæ§åˆ¶
obj.setanchor("track", 0, "xyz")

-- åº”ç”¨æ—‹è½¬
obj.rx = rotate_x
obj.ry = rotate_y
obj.rz = rotate_z

-- è°ƒæ•´è·ç¦»
obj.oz = distance
```

#### æ³¢æµªæ–‡å­—æ•ˆæœ

```lua
--font@main_font:å­—ä½“,å¾®è½¯é›…é»‘
--value@text:æ–‡æœ¬å†…å®¹,"Hello World"
--track@wave_speed:æ³¢æµªé€Ÿåº¦,0,5,1
--track@wave_height:æ³¢æµªé«˜åº¦,0,50,20

obj.setfont(main_font, 48, 0, 0x000000, 0xffffff)

for i = 1, #text do
    local char = string.sub(text, i, i)
    local x = (i - 1) * 40
    local wave = math.sin((obj.time * wave_speed + i * 0.5)) * wave_height
    local y = wave

    obj.load("text", char)
    obj.draw(x, y)
end
```

#### å¤šå¯¹è±¡è„šæœ¬

```lua
--@particle_system
--track@count:ç²’å­æ•°,10,100,50
--color@color:ç²’å­é¢œè‰²,0xffffff

if obj.index == 0 then
    -- ä¸»å¯¹è±¡ï¼šç®¡ç†ç²’å­
    obj.setoption("drawtarget", "tempbuffer", 1920, 1080)
    obj.clearbuffer("tempbuffer")
else
    -- ç²’å­å¯¹è±¡ï¼šç»˜åˆ¶å•ä¸ªç²’å­
    local angle = (obj.index / obj.num) * 2 * math.pi + obj.time * 2
    local radius = 100 + math.sin(obj.time + obj.index) * 50
    obj.ox = math.cos(angle) * radius
    obj.oy = math.sin(angle) * radius
    obj.load("figure", "åœ†", color, 10)
    obj.draw()
end

if obj.index == obj.num - 1 then
    -- æœ€åå¯¹è±¡ï¼šæ˜¾ç¤ºç»“æœ
    obj.load("tempbuffer")
    obj.setoption("drawtarget", "framebuffer")
end

--@main
-- å…¶ä»–è„šæœ¬å†…å®¹
```

## é«˜çº§æŠ€å·§

### æ€§èƒ½ä¼˜åŒ–

1. **å‡å°‘ç»˜åˆ¶è°ƒç”¨**: ä½¿ç”¨ `obj.drawpoly()` æ‰¹é‡ç»˜åˆ¶ä»£æ›¿å¤šæ¬¡ `obj.draw()`
2. **é¿å…ä¸å¿…è¦çš„è®¡ç®—**: åœ¨å¾ªç¯å¤–è®¡ç®—å¸¸é‡å€¼
3. **ä½¿ç”¨è™šæ‹Ÿç¼“å†²åŒº**: å¤æ‚æ•ˆæœå…ˆæ¸²æŸ“åˆ°è™šæ‹Ÿç¼“å†²åŒºå†è¾“å‡º
4. **åˆç†ä½¿ç”¨éšæœºæ•°**: é¿å…åœ¨æ¯å¸§éƒ½é‡æ–°ç”Ÿæˆéšæœºæ•°
5. **åƒç´ æ“ä½œä¼˜åŒ–**: å‡å°‘ `getpixel`/`putpixel` çš„è°ƒç”¨é¢‘ç‡

### å†…å­˜ç®¡ç†

```lua
-- é¿å…åœ¨å¾ªç¯ä¸­é‡å¤åˆ›å»ºè¡¨æ ¼
local vertices = {}
for i = 1, 1000 do
    vertices[i] = {x = i * 10, y = 0, z = 0}
end
obj.drawpoly(vertices)
```

### é”™è¯¯å¤„ç†

```lua
-- å®‰å…¨çš„æ–‡ä»¶åŠ è½½
local function safe_load(filename)
    local success, result = pcall(function()
        return obj.load("image", filename)
    end)

    if not success then
        obj.load("text", "åŠ è½½å¤±è´¥: " .. filename)
    end
end
```

### æ•°å­¦æŠ€å·§

```lua
-- å¹³æ»‘æ’å€¼
local function smooth_step(edge0, edge1, x)
    x = math.max(0, math.min(1, (x - edge0) / (edge1 - edge0)))
    return x * x * (3 - 2 * x)
end

-- ç¼“åŠ¨å‡½æ•°
local function ease_out_cubic(t)
    return 1 - math.pow(1 - t, 3)
end

-- ä½¿ç”¨ç¤ºä¾‹
local t = obj.time / 2
obj.ox = smooth_step(0, 200, t)
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: è„šæœ¬æ— æ³•åŠ è½½ï¼Ÿ**
- A: æ£€æŸ¥è„šæœ¬æ–‡ä»¶ç¼–ç æ˜¯å¦ä¸ºUTF-8ï¼Œè·¯å¾„æ˜¯å¦æ­£ç¡®ï¼Œè¯­æ³•æ˜¯å¦æœ‰è¯¯ã€‚

**Q: æ•ˆæœæ²¡æœ‰æ˜¾ç¤ºï¼Ÿ**
- A: ç¡®è®¤å¯¹è±¡ç±»å‹æ˜¯å¦æ”¯æŒè¯¥æ•ˆæœï¼Œå‚æ•°æ˜¯å¦æ­£ç¡®ï¼Œè„šæœ¬æ‰§è¡Œé¡ºåºæ˜¯å¦æ­£ç¡®ã€‚

**Q: æ€§èƒ½å¾ˆå·®ï¼Ÿ**
- A: ä¼˜åŒ–ç»˜åˆ¶è°ƒç”¨ï¼Œå‡å°‘ä¸å¿…è¦çš„è®¡ç®—ï¼Œè€ƒè™‘ä½¿ç”¨è™šæ‹Ÿç¼“å†²åŒºï¼Œé¿å…é¢‘ç¹çš„åƒç´ æ“ä½œã€‚

**Q: éšæœºæ•°ä¸éšæœºï¼Ÿ**
- A: è¿™æ˜¯æ­£å¸¸è¡Œä¸ºï¼ŒåŒä¸€å¸§çš„éšæœºæ•°åº”è¯¥ç›¸åŒã€‚ä½¿ç”¨ä¸åŒçš„ç§å­æˆ–å¸§å·ã€‚

**Q: ç€è‰²å™¨ä¸å·¥ä½œï¼Ÿ**
- A: æ£€æŸ¥ç€è‰²å™¨è¯­æ³•æ˜¯å¦æ­£ç¡®ï¼Œå…¥å£ç‚¹å‡½æ•°åæ˜¯å¦ä¸æ³¨å†Œåä¸€è‡´ã€‚

### è°ƒè¯•æŠ€å·§

```lua
-- è¾“å‡ºè°ƒè¯•ä¿¡æ¯
obj.load("text", string.format("time: %.2f", obj.time))

-- æ¡ä»¶è°ƒè¯•
if obj.frame == 60 then
    -- åœ¨ç¬¬60å¸§æ—¶çš„è°ƒè¯•ä»£ç 
end

-- èŒƒå›´æ£€æŸ¥
if obj.ox < -1000 or obj.ox > 1000 then
    debug_print("å¯¹è±¡ä½ç½®å¼‚å¸¸: " .. obj.ox)
end
```

## æ›´æ–°å†å²

### ç¨‹åºæ›´æ–°å†å²

- **2025/9/21**
  - æ·»åŠ æ–‡æœ¬è®¾ç½®é¡¹ç›® (`--text@`)
  - æ–°å¢ `obj.getvalue()` å¯¹åŸºå‡†ä¸­å¿ƒåæ ‡çš„æ”¯æŒ
  - `obj.drawpoly()` æ–°å¢é¡¶ç‚¹åˆ—è¡¨ç»˜åˆ¶æ–¹æ³•
  - `obj.getinfo()` æ–°å¢ç¯å¢ƒä¿¡æ¯è·å–åŠŸèƒ½
  - ä¿®å¤ `obj.getvalue("layer.x")` åœ¨æŒ‡å®šå›¾å±‚æ— å¯¹è±¡æ—¶çš„å¤„ç†
  - ä¿®å¤åœºæ™¯å˜æ¢è„šæœ¬ä¸­ `obj.setanchor()` çš„ä½¿ç”¨

- **2025/9/13**
  - ä¿®å¤è„šæœ¬æ§åˆ¶å’Œè„šæœ¬æ–‡ä»¶å¯¹åŒ…å«åº“çš„é€‰æ‹©
  - ä¿®å¤ `obj.copybuffer()` æ›´æ–°å¯¹è±¡æ—¶éƒ¨åˆ† `obj` å˜é‡æœªæ­£ç¡®æ›´æ–°
  - ä¿®å¤ `obj.layer` å€¼åæ˜ ç»˜åˆ¶ç›®æ ‡å¯¹è±¡çš„å›¾å±‚ä½ç½®
  - ä¿®å¤ `obj.drawpoly()` æ•°ç»„æŒ‡å®šæ—¶çš„åæ ‡æ¸²æŸ“
  - æ–°å¢ `obj.getinfo("clock")` å’Œ `obj.getinfo("script_time")` å‡½æ•°

- **2025/9/7**
  - ä¿®å¤ `obj.setanchor()` å¯¹ç›´æ¥è¡¨æ ¼å˜é‡æŒ‡å®šæ—¶çš„å´©æºƒ
  - ä¿®å¤è„šæœ¬æ§åˆ¶ä¸­ä¸å¿…è¦çš„ Lua åº“å‡½æ•°åŒ…å«

- **2025/8/30**
  - ä¿®å¤è½¨é“æ¡ç§»åŠ¨è„šæœ¬ä¸­ `obj.rand()` é»˜è®¤ç§å­è®¡ç®—çš„é—®é¢˜
  - ä¿®å¤æ–‡æœ¬å•ç‹¬å¯¹è±¡æ˜¾ç¤ºæ—¶æœºæœªåæ˜ åˆ° `obj` å˜é‡çš„é—®é¢˜

- **2025/8/24**
  - ä¿®å¤è¾“å‡ºæ—¥å¿—å¯èƒ½å¯¼è‡´å´©æºƒçš„é—®é¢˜
  - æ”¹è¿› `obj.getpixel()` çš„ç¼“å­˜å¤„ç†å¹¶æ·»åŠ å¤„ç†è¯´æ˜
  - æ–°å¢ `obj.putpixel()` å’Œ `obj.copypixel()` å‡½æ•°
  - æ‰©å±• `obj.pixeloption()` é€‰é¡¹
  - ä¿®å¤ `obj.setoption()` åˆæˆæ¨¡å¼çš„éƒ¨åˆ†å¤„ç†é—®é¢˜

- **2025/8/10**
  - ä¿®å¤ `obj.copybuffer()` åœ¨å¤åˆ¶å›¾åƒæ–‡ä»¶æ—¶ä¸èƒ½æ­£ç¡®åæ˜ çš„é—®é¢˜
  - ä¿®å¤æ›´æ–°å¯¹è±¡æ—¶ `obj` å˜é‡æœªæ›´æ–°çš„é—®é¢˜
  - ä¿®å¤å¯¹è±¡å›¾åƒä¸å­˜åœ¨æ—¶ `obj.drawpoly()` å¯èƒ½å¯¼è‡´å´©æºƒçš„é—®é¢˜

- **2025/8/3**
  - æ·»åŠ  `obj.effect()` å‚æ•°å€¼ä¸ºæ•°å€¼ç±»å‹æ—¶çš„å¤„ç†æªæ–½

- **2025/7/27**
  - ä¿®å¤è™šæ‹Ÿç¼“å†²åŒºå’Œç¼“å­˜ç¼“å†²åŒºä¸èƒ½æ­£ç¡®ç”Ÿæˆçš„é—®é¢˜

- **2025/7/12**
  - æ–°å¢ `copybuffer()` å‡½æ•°çš„å¤åˆ¶ç›®æ ‡ç±»å‹

### æ–‡æ¡£æ›´æ–°å†å²

- **2025/9/21** v3.0.1 - æ›´æ–°è‡³æœ€æ–°å®˜æ–¹æ–‡æ¡£
  - æ·»åŠ æ–‡æœ¬è®¾ç½®é¡¹ç›® (`--text@`)
  - æ–°å¢ `obj.getvalue()` å¯¹åŸºå‡†ä¸­å¿ƒåæ ‡çš„æ”¯æŒ
  - æ‰©å±• `obj.drawpoly()` çš„é¡¶ç‚¹åˆ—è¡¨ç»˜åˆ¶æ–¹æ³•
  - æ·»åŠ  `obj.getinfo()` çš„ç¯å¢ƒä¿¡æ¯è·å–åŠŸèƒ½
  - æ›´æ–°å†…ç½®å˜é‡ `obj.layer` çš„è¯´æ˜
  - å®Œå–„åƒç´ æ“ä½œå‡½æ•°è¯´æ˜
  - æ›´æ–°é‡è¦æ³¨æ„äº‹é¡¹ï¼Œæ·»åŠ åº“é™åˆ¶è¯´æ˜
  - å®Œæ•´æ›´æ–°ç¨‹åºæ›´æ–°å†å²è‡³æœ€æ–°ç‰ˆæœ¬

- **2025/8/24** v3.0 - å®Œæ•´é‡æ„ï¼ŒåŸºäºæœ€æ–°å®˜æ–¹æ–‡æ¡£
  - åˆå¹¶ lua.txt å’Œ lua-script-guide2.md çš„æ‰€æœ‰å†…å®¹
  - æ–°å¢åƒç´ æ“ä½œã€éŸ³é¢‘å¤„ç†ã€ç€è‰²å™¨æ“ä½œç­‰æœ€æ–°åŠŸèƒ½
  - æ‰©å±•ä½¿ç”¨ç¤ºä¾‹å’Œé«˜çº§æŠ€å·§
  - å®Œå–„é”™è¯¯å¤„ç†å’Œæ€§èƒ½ä¼˜åŒ–å»ºè®®

- **2024/08/22** v2.0 - æ–‡æ¡£é‡æ„
  - è¡¥å……å®Œæ•´çš„åƒç´ æ“ä½œå‡½æ•°
  - æ·»åŠ é”šç‚¹æ“ä½œè¯´æ˜
  - å®Œå–„æ‰€æœ‰ä½¿ç”¨ç¤ºä¾‹
  - ä¼˜åŒ–æ–‡æ¡£ç»“æ„å’Œæ ¼å¼
  - æ·»åŠ é«˜çº§æŠ€å·§ç« èŠ‚

- **2023/XX/XX** v1.0 - åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
  - åŸºäºå®˜æ–¹æ–‡æ¡£ç¿»è¯‘æ•´ç†
  - åŸºç¡€åŠŸèƒ½è¯´æ˜
  - åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹

---

::: info è´¡çŒ®
å‘ç°æ–‡æ¡£é”™è¯¯æˆ–æœ‰æ”¹è¿›å»ºè®®ï¼Ÿæ¬¢è¿æäº¤ Issue æˆ– Pull Requestã€‚

**æ–‡æ¡£æºç **: [æ–‡æ¡£ä»“åº“](https://github.com/gasdyueer/learnvite)
:::